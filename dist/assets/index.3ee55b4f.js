const we=function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const u of document.querySelectorAll('link[rel="modulepreload"]'))v(u);new MutationObserver(u=>{for(const w of u)if(w.type==="childList")for(const P of w.addedNodes)P.tagName==="LINK"&&P.rel==="modulepreload"&&v(P)}).observe(document,{childList:!0,subtree:!0});function n(u){const w={};return u.integrity&&(w.integrity=u.integrity),u.referrerpolicy&&(w.referrerPolicy=u.referrerpolicy),u.crossorigin==="use-credentials"?w.credentials="include":u.crossorigin==="anonymous"?w.credentials="omit":w.credentials="same-origin",w}function v(u){if(u.ep)return;u.ep=!0;const w=n(u);fetch(u.href,w)}};we();var ee=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{},he={exports:{}};(function(i){(function(a){var n=G(),v=$(),u=q(),w=p(),P={imagePlaceholder:void 0,cacheBust:!1},h={toSvg:E,toPng:f,toJpeg:x,toBlob:y,toPixelData:o,impl:{fontFaces:u,images:w,util:n,inliner:v,options:{}}};i.exports=h;function E(e,t){return t=t||{},S(t),Promise.resolve(e).then(function(l){return I(l,t.filter,!0)}).then(T).then(C).then(r).then(function(l){return N(l,t.width||n.width(e),t.height||n.height(e))});function r(l){return t.bgcolor&&(l.style.backgroundColor=t.bgcolor),t.width&&(l.style.width=t.width+"px"),t.height&&(l.style.height=t.height+"px"),t.style&&Object.keys(t.style).forEach(function(g){l.style[g]=t.style[g]}),l}}function o(e,t){return k(e,t||{}).then(function(r){return r.getContext("2d").getImageData(0,0,n.width(e),n.height(e)).data})}function f(e,t){return k(e,t||{}).then(function(r){return r.toDataURL()})}function x(e,t){return t=t||{},k(e,t).then(function(r){return r.toDataURL("image/jpeg",t.quality||1)})}function y(e,t){return k(e,t||{}).then(n.canvasToBlob)}function S(e){typeof e.imagePlaceholder=="undefined"?h.impl.options.imagePlaceholder=P.imagePlaceholder:h.impl.options.imagePlaceholder=e.imagePlaceholder,typeof e.cacheBust=="undefined"?h.impl.options.cacheBust=P.cacheBust:h.impl.options.cacheBust=e.cacheBust}function k(e,t){return E(e,t).then(n.makeImage).then(n.delay(100)).then(function(l){var g=r(e);return g.getContext("2d").drawImage(l,0,0),g});function r(l){var g=document.createElement("canvas");if(g.width=t.width||n.width(l),g.height=t.height||n.height(l),t.bgcolor){var c=g.getContext("2d");c.fillStyle=t.bgcolor,c.fillRect(0,0,g.width,g.height)}return g}}function I(e,t,r){if(!r&&t&&!t(e))return Promise.resolve();return Promise.resolve(e).then(l).then(function(d){return g(e,d,t)}).then(function(d){return c(e,d)});function l(d){return d instanceof HTMLCanvasElement?n.makeImage(d.toDataURL()):d.cloneNode(!1)}function g(d,m,B){var F=d.childNodes;if(F.length===0)return Promise.resolve(m);return j(m,n.asArray(F),B).then(function(){return m});function j(z,M,U){var R=Promise.resolve();return M.forEach(function(H){R=R.then(function(){return I(H,U)}).then(function(D){D&&z.appendChild(D)})}),R}}function c(d,m){if(!(m instanceof Element))return m;return Promise.resolve().then(B).then(F).then(j).then(z).then(function(){return m});function B(){M(window.getComputedStyle(d),m.style);function M(U,R){U.cssText?R.cssText=U.cssText:H(U,R);function H(D,X){n.asArray(D).forEach(function(s){X.setProperty(s,D.getPropertyValue(s),D.getPropertyPriority(s))})}}}function F(){[":before",":after"].forEach(function(U){M(U)});function M(U){var R=window.getComputedStyle(d,U),H=R.getPropertyValue("content");if(H===""||H==="none")return;var D=n.uid();m.className=m.className+" "+D;var X=document.createElement("style");X.appendChild(s(D,U,R)),m.appendChild(X);function s(b,L,A){var V="."+b+":"+L,J=A.cssText?re(A):ie(A);return document.createTextNode(V+"{"+J+"}");function re(Y){var K=Y.getPropertyValue("content");return Y.cssText+" content: "+K+";"}function ie(Y){return n.asArray(Y).map(K).join("; ")+";";function K(Z){return Z+": "+Y.getPropertyValue(Z)+(Y.getPropertyPriority(Z)?" !important":"")}}}}}function j(){d instanceof HTMLTextAreaElement&&(m.innerHTML=d.value),d instanceof HTMLInputElement&&m.setAttribute("value",d.value)}function z(){m instanceof SVGElement&&(m.setAttribute("xmlns","http://www.w3.org/2000/svg"),m instanceof SVGRectElement&&["width","height"].forEach(function(M){var U=m.getAttribute(M);!U||m.style.setProperty(M,U)}))}}}function T(e){return u.resolveAll().then(function(t){var r=document.createElement("style");return e.appendChild(r),r.appendChild(document.createTextNode(t)),e})}function C(e){return w.inlineAll(e).then(function(){return e})}function N(e,t,r){return Promise.resolve(e).then(function(l){return l.setAttribute("xmlns","http://www.w3.org/1999/xhtml"),new XMLSerializer().serializeToString(l)}).then(n.escapeXhtml).then(function(l){return'<foreignObject x="0" y="0" width="100%" height="100%">'+l+"</foreignObject>"}).then(function(l){return'<svg xmlns="http://www.w3.org/2000/svg" width="'+t+'" height="'+r+'">'+l+"</svg>"}).then(function(l){return"data:image/svg+xml;charset=utf-8,"+l})}function G(){return{escape:z,parseExtension:t,mimeType:r,dataAsUrl:j,isDataUrl:l,canvasToBlob:c,resolveUrl:d,getAndEncode:F,uid:m(),delay:M,asArray:U,escapeXhtml:R,makeImage:B,width:H,height:D};function e(){var s="application/font-woff",b="image/jpeg";return{woff:s,woff2:s,ttf:"application/font-truetype",eot:"application/vnd.ms-fontobject",png:"image/png",jpg:b,jpeg:b,gif:"image/gif",tiff:"image/tiff",svg:"image/svg+xml"}}function t(s){var b=/\.([^\.\/]*?)$/g.exec(s);return b?b[1]:""}function r(s){var b=t(s).toLowerCase();return e()[b]||""}function l(s){return s.search(/^(data:)/)!==-1}function g(s){return new Promise(function(b){for(var L=window.atob(s.toDataURL().split(",")[1]),A=L.length,V=new Uint8Array(A),J=0;J<A;J++)V[J]=L.charCodeAt(J);b(new Blob([V],{type:"image/png"}))})}function c(s){return s.toBlob?new Promise(function(b){s.toBlob(b)}):g(s)}function d(s,b){var L=document.implementation.createHTMLDocument(),A=L.createElement("base");L.head.appendChild(A);var V=L.createElement("a");return L.body.appendChild(V),A.href=b,V.href=s,V.href}function m(){var s=0;return function(){return"u"+b()+s++;function b(){return("0000"+(Math.random()*Math.pow(36,4)<<0).toString(36)).slice(-4)}}}function B(s){return new Promise(function(b,L){var A=new Image;A.onload=function(){b(A)},A.onerror=L,A.src=s})}function F(s){var b=3e4;return h.impl.options.cacheBust&&(s+=(/\?/.test(s)?"&":"?")+new Date().getTime()),new Promise(function(L){var A=new XMLHttpRequest;A.onreadystatechange=re,A.ontimeout=ie,A.responseType="blob",A.timeout=b,A.open("GET",s,!0),A.send();var V;if(h.impl.options.imagePlaceholder){var J=h.impl.options.imagePlaceholder.split(/,/);J&&J[1]&&(V=J[1])}function re(){if(A.readyState===4){if(A.status!==200){V?L(V):Y("cannot fetch resource: "+s+", status: "+A.status);return}var K=new FileReader;K.onloadend=function(){var Z=K.result.split(/,/)[1];L(Z)},K.readAsDataURL(A.response)}}function ie(){V?L(V):Y("timeout of "+b+"ms occured while fetching resource: "+s)}function Y(K){console.error(K),L("")}})}function j(s,b){return"data:"+b+";base64,"+s}function z(s){return s.replace(/([.*+?^${}()|\[\]\/\\])/g,"\\$1")}function M(s){return function(b){return new Promise(function(L){setTimeout(function(){L(b)},s)})}}function U(s){for(var b=[],L=s.length,A=0;A<L;A++)b.push(s[A]);return b}function R(s){return s.replace(/#/g,"%23").replace(/\n/g,"%0A")}function H(s){var b=X(s,"border-left-width"),L=X(s,"border-right-width");return s.scrollWidth+b+L}function D(s){var b=X(s,"border-top-width"),L=X(s,"border-bottom-width");return s.scrollHeight+b+L}function X(s,b){var L=window.getComputedStyle(s).getPropertyValue(b);return parseFloat(L.replace("px",""))}}function $(){var e=/url\(['"]?([^'"]+?)['"]?\)/g;return{inlineAll:g,shouldProcess:t,impl:{readUrls:r,inline:l}};function t(c){return c.search(e)!==-1}function r(c){for(var d=[],m;(m=e.exec(c))!==null;)d.push(m[1]);return d.filter(function(B){return!n.isDataUrl(B)})}function l(c,d,m,B){return Promise.resolve(d).then(function(j){return m?n.resolveUrl(j,m):j}).then(B||n.getAndEncode).then(function(j){return n.dataAsUrl(j,n.mimeType(d))}).then(function(j){return c.replace(F(d),"$1"+j+"$3")});function F(j){return new RegExp(`(url\\(['"]?)(`+n.escape(j)+`)(['"]?\\))`,"g")}}function g(c,d,m){if(B())return Promise.resolve(c);return Promise.resolve(c).then(r).then(function(F){var j=Promise.resolve(c);return F.forEach(function(z){j=j.then(function(M){return l(M,z,d,m)})}),j});function B(){return!t(c)}}}function q(){return{resolveAll:e,impl:{readAll:t}};function e(){return t().then(function(r){return Promise.all(r.map(function(l){return l.resolve()}))}).then(function(r){return r.join(`
`)})}function t(){return Promise.resolve(n.asArray(document.styleSheets)).then(l).then(r).then(function(c){return c.map(g)});function r(c){return c.filter(function(d){return d.type===CSSRule.FONT_FACE_RULE}).filter(function(d){return v.shouldProcess(d.style.getPropertyValue("src"))})}function l(c){var d=[];return c.forEach(function(m){try{n.asArray(m.cssRules||[]).forEach(d.push.bind(d))}catch(B){console.log("Error while reading CSS rules from "+m.href,B.toString())}}),d}function g(c){return{resolve:function(){var m=(c.parentStyleSheet||{}).href;return v.inlineAll(c.cssText,m)},src:function(){return c.style.getPropertyValue("src")}}}}}function p(){return{inlineAll:t,impl:{newImage:e}};function e(r){return{inline:l};function l(g){return n.isDataUrl(r.src)?Promise.resolve():Promise.resolve(r.src).then(g||n.getAndEncode).then(function(c){return n.dataAsUrl(c,n.mimeType(r.src))}).then(function(c){return new Promise(function(d,m){r.onload=d,r.onerror=m,r.src=c})})}}function t(r){if(!(r instanceof Element))return Promise.resolve(r);return l(r).then(function(){return r instanceof HTMLImageElement?e(r).inline():Promise.all(n.asArray(r.childNodes).map(function(g){return t(g)}))});function l(g){var c=g.style.getPropertyValue("background");return c?v.inlineAll(c).then(function(d){g.style.setProperty("background",d,g.style.getPropertyPriority("background"))}).then(function(){return g}):Promise.resolve(g)}}}})()})(he);var be=he.exports,ge={exports:{}};(function(i,a){(function(n,v){v()})(ee,function(){function n(o,f){return typeof f=="undefined"?f={autoBom:!1}:typeof f!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),f={autoBom:!f}),f.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(o.type)?new Blob(["\uFEFF",o],{type:o.type}):o}function v(o,f,x){var y=new XMLHttpRequest;y.open("GET",o),y.responseType="blob",y.onload=function(){E(y.response,f,x)},y.onerror=function(){console.error("could not download file")},y.send()}function u(o){var f=new XMLHttpRequest;f.open("HEAD",o,!1);try{f.send()}catch{}return 200<=f.status&&299>=f.status}function w(o){try{o.dispatchEvent(new MouseEvent("click"))}catch{var f=document.createEvent("MouseEvents");f.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),o.dispatchEvent(f)}}var P=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof ee=="object"&&ee.global===ee?ee:void 0,h=P.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),E=P.saveAs||(typeof window!="object"||window!==P?function(){}:"download"in HTMLAnchorElement.prototype&&!h?function(o,f,x){var y=P.URL||P.webkitURL,S=document.createElement("a");f=f||o.name||"download",S.download=f,S.rel="noopener",typeof o=="string"?(S.href=o,S.origin===location.origin?w(S):u(S.href)?v(o,f,x):w(S,S.target="_blank")):(S.href=y.createObjectURL(o),setTimeout(function(){y.revokeObjectURL(S.href)},4e4),setTimeout(function(){w(S)},0))}:"msSaveOrOpenBlob"in navigator?function(o,f,x){if(f=f||o.name||"download",typeof o!="string")navigator.msSaveOrOpenBlob(n(o,x),f);else if(u(o))v(o,f,x);else{var y=document.createElement("a");y.href=o,y.target="_blank",setTimeout(function(){w(y)})}}:function(o,f,x,y){if(y=y||open("","_blank"),y&&(y.document.title=y.document.body.innerText="downloading..."),typeof o=="string")return v(o,f,x);var S=o.type==="application/octet-stream",k=/constructor/i.test(P.HTMLElement)||P.safari,I=/CriOS\/[\d]+/.test(navigator.userAgent);if((I||S&&k||h)&&typeof FileReader!="undefined"){var T=new FileReader;T.onloadend=function(){var G=T.result;G=I?G:G.replace(/^data:[^;]*;/,"data:attachment/file;"),y?y.location.href=G:location=G,y=null},T.readAsDataURL(o)}else{var C=P.URL||P.webkitURL,N=C.createObjectURL(o);y?y.location=N:location.href=N,y=null,setTimeout(function(){C.revokeObjectURL(N)},4e4)}});P.saveAs=E.saveAs=E,i.exports=E})})(ge);const se=new Set(["Australian Greens","Australian Labor Party","Liberal-National Coalition"]),ae=new Map([["Australian Greens","broccoli"],["Australian Labor Party","tomatoes"],["Liberal-National Coalition","blueberries"]]),Pe=new Map([["National Party","Liberal-National Coalition"],["Liberal Party","Liberal-National Coalition"],["Liberal National Party","Liberal-National Coalition"],["Country Liberal Party","Liberal-National Coalition"]]),Ee=i=>{let a=4,n=1;for(;a;)n*=i- --a;return n},O=new Proxy(window.console,{get(){return()=>{}}}),W=(i,a,n=[])=>{var v;return(v=i.get(a))!=null?v:i.set(a,n)&&n},Ae=async()=>{const i=await fetch("/db.json").then(h=>h.json()),a=Object.keys(i.people),n=new Map(Object.entries(i.people)),v=new Map(Object.entries(i.policies)),u=new Map,w=new Map;let P=0;for(const[h,E]of n){const o=E.name[0].replace(/-/g,"").toLowerCase(),f=W(w,o);E.index=++P,E.lookup={name:o,list:f,index:f.push(h)},E.policies=new Map(Object.entries(E.policies));const x=W(u,E.party,{policies:new Map,people:[]});x.people.push(h);const y=Pe.get(E.party),S=y&&W(u,y,{policies:new Map,people:[]});S&&S.people.push(h);for(const[k,I]of E.policies){if(I%100)continue;const T=v.get(k);if(!T)continue;T.parties||(T.parties=new Map);const C=W(T.parties,E.party,{for:[],against:[]});if(I?C.for.push(h):C.against.push(h),x.policies.has(k)||x.policies.set(k,C),!y)continue;const N=W(T.parties,y,{for:[],against:[]});I?N.for.push(h):N.against.push(h),S.policies.has(k)||S.policies.set(k,N)}}return O.log("NAMES",w),O.log("POLICIES",v),O.log("PARTIES",u),{permutations:Ee(n.size).toLocaleString(),names:w,ids:a,people:n,policies:v,parties:u}},Se=i=>{if(i.length<2)return;const a=i.slice(1).split("/"),n=a.pop().split("-"),v=a.length?a.pop().split(/\B/):[],u=v.slice(),w=[];for(const P of n){const h=_.names.get(P);if(!h)continue;let E=0;h.length>1&&v.length&&(O.log(h),E=Math.max(1,Math.min(h.length,parseInt(v.shift(),36)))-1),w.push(h[E])}return O.log("PARSE",i,a,u,w),w},Le=(...i)=>{const a=[];let n="";for(const v of i){const u=_.people.get(v);u&&(a.push(u.lookup.name),u.lookup.list.length>1&&(n+=u.lookup.index.toString(36)))}return O.log({names:a,indexes:n},[""].concat(n||[],a.join("-")).join("/")),[""].concat(n||[],a.join("-")).join("/")},Te=330/800,$e=300/800;let oe,te,me=0;const je=document.querySelector(".description"),Me=document.querySelector(".twitter"),xe=document.querySelector(".email"),Q=document.querySelector(".partials"),ce=document.querySelectorAll(".partial-image"),Ce=document.querySelectorAll(".info"),ye=i=>{++me>=ce.length&&setTimeout(()=>{delete Q.dataset.loading},500)},Re=i=>{if(i.target.classList.contains("default"))return ye();i.target.parentElement.parentElement.style="",i.target.parentElement.style="",i.target.classList.add("default"),i.target.src="/assets/whereswilma.webp"};Q.addEventListener("load",ye,!0);Q.addEventListener("error",Re,!0);const Oe=(i=[])=>{var n;const a=[];for(;a.length<ce.length;){const v=(n=i[a.length])!=null?n:_.ids[Math.floor(Math.random()*_.ids.length)];v&&!a.includes(v)&&_.people.get(v)&&a.push(v)}return a},le=i=>{me=0,Q.dataset.alt=+Q.dataset.alt?0:1,Q.dataset.loading=1;const a=[0,0],n=[],v=new Map,u=Oe(i);let w=1;for(const[h,E]of Object.entries(u)){const o=_.people.get(E);w*=o.index;const f=ce[h],x=o.image,y="/assets/manofmystery.webp";f.src=x?`/assets/people/${E}.webp`:y,f.classList.toggle("default",!x);const S=new Map;let k=0;for(const[$,q]of o.policies){const p=W(v,$,{aggregate:0,count:0,parties:new Map,people:{names:[],ids:[],parties:new Set}});if(p.people.names.push(o.name[0]),p.people.ids.push(E),p.people.parties.add(o.party),p.aggregate+=q,++p.count,q%100)continue;++k;const e=2*q/100-1,t=[];for(const[r,l]of _.policies.get($).parties){const g=Math.max(-1,Math.min(1,l.for.length-l.against.length));if(g&&p.parties.set(r,g),!se.has(r)||g!==e)continue;t.push(r),W(S,r).push($)}t.length||W(S,"Other").push($)}let I=0;const T=Array.from(S).sort(([$,q],[p,e])=>(I=Math.max(I,q.length,e.length),e.length-q.length||($===o.party?1:0)));I||(I=T[0][1].length,O.log({alignmentMax:I},T));const C=Ce[h];if(C){const $=`${o.house[0]==="s"?"Senator":"Representative"} for ${o.electorate}`,q=o.offices.length?[o.offices[0].replace(/ (to|for) .*?(?= \(|$)/,"")]:[];C.dataset.party=o.party.toLowerCase().replace(/ /g,"-").replace(/[^a-z-]/g,""),C.querySelector("img").src=f.classList.contains("default")?f.src:f.src.replace(".webp","-sm.webp"),C.querySelector(".name").innerText=o.name.join(" "),C.querySelector(".role").innerText=$,C.querySelector(".party").innerText=o.party==="CWM"?"":o.party,C.querySelector(".offices").innerHTML=q.concat(o.offices.length>1?`+${o.offices.length-1} more offices`:[]).join("<br>"),C.querySelector(".votes").innerHTML=`Consistent votes: ${k.toLocaleString()}`;for(const p of C.querySelectorAll(".partial-alignment li"))p.style=null;C.querySelector(".partial-alignment").title=`${o.name[0]}'s consistent voting alignment with the major parties`;for(const[p,[e,t]]of Object.entries(T)){O.log(e);const r=C.querySelector(`.partial-alignment li[data-party="${e}"]`);r.style.order=+p+1,r.style.width=`${Math.round(100*t.length/I)}%`,O.log(p,e,t)}}O.log(E,o.name,o.party,o),O.log("ALIGNMENT",S),O.log(T),n.push(o.name[0]);let N,G;if(x){const $=o.image[36],q=o.image[45],p=o.image[8],e=o.image[0],t=o.image[16],r=[q[0]-$[0],q[1]-$[1]],l=[p[0]-$[0],p[1]-$[1]],g=[$[0]-e[0],$[1]-e[1]],c=[t[0]-q[0],t[1]-q[1]],d=(r[0]**2+r[1]**2)**.5,m=(l[0]**2+l[1]**2)**.5,B=(g[0]**2+g[1]**2)**.5,F=(c[0]**2+c[1]**2)**.5,j=Math.atan(r[1]/r[0]),z=Math.atan(l[1]/l[0]),M=Math.sin(z-j)*m,U=B>F?1:-1,R=$e/M,H=.5-$[0]-R*d/2,D=Te-$[1];if(h==0){const X=D*R-$[1]*(R-1);a[0]=Math.max(0,X)}else if(h==u.length-1){const X=(1-$[1])*(R-1)+D*R;a[1]=Math.max(0,-X)}U<0&&(N=`transform: scaleX(${U});`),G=`transform: translate(${H*100}%, ${D*100}%) scale(${R}, ${R}) rotate(${-j}rad); transform-origin: ${$[0]*100}% ${$[1]*100}%;`}f.parentElement.parentElement.style=N,f.parentElement.style=G}const P=(a[1]-a[0])/4;Q.style=`transform: translateY(${P*100}%)`,O.log({topBottomTransform:a,offsetTransformY:P}),oe=`${n[0]} "the ${n[1]}" ${n[2]}-${n[3]}`;for(const h of document.querySelectorAll(".pollie"))h.dataset.permutation=w.toLocaleString(),h.dataset.permutations=_.permutations.toLocaleString(),h.innerText=oe;te=Le(...u),history.state&&history.state.ids&&history.state.ids.join("")!==u.join("")?(O.log("PUSH STATE!",history.state,te),history.pushState({ids:u},"",te)):(O.log("REPLACE STATE!"),history.replaceState({ids:u},"",te)),Me.href=Ue(oe),xe.href=Ie(),qe(v)},Ue=i=>{const a=new URL("https://twitter.com/intent/tweet");return a.searchParams.set("text",`${i} is truly the Perfect \u2764\uFE0F Pollie`),a.searchParams.set("url",location.origin+location.pathname),a},Ie=i=>{const a=encodeURIComponent(`Hey I found the the Perfect Pollie -

${location.origin+location.pathname}

Love ya guts!`);return`mailto:?subject=${encodeURIComponent("found the the perfect pollie")}&body=${a}`},ue=i=>i.length<=2?i.join(" and "):i.slice(0,-2).join(", ").concat(", ",i.slice(-2).join(" and ")),fe=document.querySelector(".policies-for-bigticket"),pe=document.querySelector(".policies-for-major"),de=document.querySelector(".policies-for");document.querySelector(".policies-against-bigticket");document.querySelector(".policies-against-major");document.querySelector(".policies-against");const ke=document.querySelectorAll(".alignment li"),qe=i=>{let a=0,n=0;const v=new Map,u=new Map,w=new Map,P=new Map;for(const[p,e]of i){const t=e.aggregate/e.count;let r;if(t===100)r=w;else if(t===0)r=P;else continue;const l=_.policies.get(p),g=2*t/100-1,c=e.count**2;c>10&&O.log(p,l.name,e.count,c);const d=[],m=[];for(const[M,U]of e.parties)if(g===U){m.push(M);const R=W(v,M,{score:0,total:0});if(se.has(M)){d.push(p);const H=W(u,M,{score:0,total:0});H[p]=c,H.score+=c,++H.total,n+=c,c>10&&O.log(H,M,g,U)}R[p]=c,R.score+=c,a+=c}if(!d.length){const M=W(u,"Other",{score:0,total:0});M[p]=c,M.score+=c,++M.total,n+=c}const B=W(r,e.count),F=ue(e.people.names),j=e.count>1?"agree":"agrees",z=e.count>1?"do not agree":"does not agree";B.push(`<li class="${t?"is-for":"is-against"}">
      <details>
        <summary title="${F} ${j} this is a ${t?"great":"terrible"} policy" data-count="${e.count}">${l.name}</summary>
        <p><i>${F}</i> ${t?j:z} that ${l.description}
          <br><small>Aligned Parties: ${m.sort().join(", ")}</small>
        </p>
      </details>
    </li>`)}O.log("POLICY ALIGNMENT",a,v),O.log("POLICY ALIGNMENT MAJOR",n,u);let h,E,o=0;const f=[],x=[],y=[];for(const[p,e]of u)e.percent=100*e.score/n,e.percentRounded=Math.ceil(e.percent),o+=e.percentRounded,(!h||e.score>h.score)&&(h=e,E=p),(p!=="Other"||e.percent>60)&&(e.percent>=25?(f.push(p),x.push(ae.get(p))):e.percent>10&&y.push(ae.get(p)));h.percentRounded+=100-o;for(const p of ke){const e=u.get(p.dataset.party);delete p.dataset.primary,e?(p.style.width=`${e.percent}%`,p.style.order=p.dataset.percent=e.percentRounded,p.dataset.score=e.score,p.dataset.total=e.total,h===e&&(p.dataset.primary="1")):(delete p.dataset.total,delete p.dataset.score,delete p.dataset.percent,p.style=null)}const S=[].concat(w.get(2)||[],w.get(1)||[]),k=[].concat(P.get(2)||[],P.get(1)||[]),I=(w.get(4)||[]).concat(P.get(4)||[]),T=I.length,C=(w.get(3)||[]).concat(P.get(3)||[]),N=S.concat(k);fe.innerHTML=I.join(""),fe.parentElement.dataset.total=T,pe.innerHTML=C.join(""),pe.parentElement.dataset.total=C.length,de.innerHTML=N.join(""),de.parentElement.dataset.total=N.length;const G=u.get("Other"),$=f.length===se.size,q=[`<i>${oe}</i>`].concat(T?"has":"has the look, but doesn't have any",T>5?"any number of":T||[],`<a href="#big-ticket-policies">big ticket ${T===1?"policy":"policies"}</a>`,h.percent>=60?(E==="Other"?"and is essentially a bizarre non-conformist":`${T<5?"&hellip; and":"but"} `+(T?"(of course) is essentially a":"is really just a plain-packaged")+` <span class="party-align">${E.replace(/Australian | Party/g,"")}</span> party stooge`)+` who enjoys a side of ${ue(x.filter(p=>p!==ae.get(E)).concat(y))}`:`${T?"and susbscribes to":"&hellip; despite subscribing to"} `+($?"a confused middle ground in the divine trinity of major party ideaologies":"a soggy sandwich of "+(f.length>1?`<span class="party-align">${f.join('</span> and <span class="party-align">')}</span>`:`<span class="party-align">${f[0]}</span>`)+" thinking"+(y.length?` (with a side of ${y.join(" and ")})`:""))+(G?`. And, in true Canberra style, tops things off with a ${G.percent<2?"smidge":G.percent<10&&"pinch"||"dollop"} of bizarre otherness`:"")).join(" ").concat(".");je.innerHTML=q};document.querySelector(".btn-refresh").addEventListener("click",i=>{i.target.blur(),document.body.focus(),le()});window.addEventListener("popstate",({state:i})=>{i&&i.ids&&le(i.ids),O.log("POPSTATE",i)});const Be=/^((?!chrome|android).)*safari/i.test(navigator.userAgent),Ne=["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document;Ne&&(document.body.dataset.ios=1);const ve=async i=>{const a=643.2/ne.offsetWidth,n=await be.toJpeg(ne,{width:ne.offsetWidth*a,height:ne.offsetHeight*a,style:{transform:`scale(${a})`,transformOrigin:"0 0"},bgcolor:"#fff"});return Be&&!i?ve(!0):n};for(const i of document.querySelectorAll("[data-hint]")){const a=i.dataset.hint==="over"?"pointerover":"click";i.addEventListener(a,()=>{delete i.dataset.hint},{once:!0})}const ne=document.querySelector(".image");document.querySelector(".copy").addEventListener("click",()=>{navigator.clipboard.writeText(location.origin+location.pathname).then(()=>{O.log("saved!")},()=>{O.log("whoops!")})});document.querySelector(".save").addEventListener("click",async()=>{const i=await ve(),a=`${location.pathname.slice(1).replace(/([^\/]+)\/(.*)$/,"$2-$1")}.jpg`;ge.exports.saveAs(i,a)});let _;const Fe=async()=>{_=await Ae();const i=document.querySelector(".combos");i&&(i.innerText=_.permutations);const a=Se(location.pathname);le(a)};Fe();
