const Oe=function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const c of document.querySelectorAll('link[rel="modulepreload"]'))g(c);new MutationObserver(c=>{for(const w of c)if(w.type==="childList")for(const b of w.addedNodes)b.tagName==="LINK"&&b.rel==="modulepreload"&&g(b)}).observe(document,{childList:!0,subtree:!0});function e(c){const w={};return c.integrity&&(w.integrity=c.integrity),c.referrerpolicy&&(w.referrerPolicy=c.referrerpolicy),c.crossorigin==="use-credentials"?w.credentials="include":c.crossorigin==="anonymous"?w.credentials="omit":w.credentials="same-origin",w}function g(c){if(c.ep)return;c.ep=!0;const w=e(c);fetch(c.href,w)}};Oe();var ne=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{},Ae={exports:{}};(function(n){(function(r){var e=G(),g=M(),c=q(),w=p(),b={imagePlaceholder:void 0,cacheBust:!1},d={toSvg:S,toPng:f,toJpeg:C,toBlob:m,toPixelData:a,impl:{fontFaces:c,images:w,util:e,inliner:g,options:{}}};n.exports=d;function S(t,o){return o=o||{},A(o),Promise.resolve(t).then(function(u){return I(u,o.filter,!0)}).then($).then(O).then(i).then(function(u){return B(u,o.width||e.width(t),o.height||e.height(t))});function i(u){return o.bgcolor&&(u.style.backgroundColor=o.bgcolor),o.width&&(u.style.width=o.width+"px"),o.height&&(u.style.height=o.height+"px"),o.style&&Object.keys(o.style).forEach(function(y){u.style[y]=o.style[y]}),u}}function a(t,o){return U(t,o||{}).then(function(i){return i.getContext("2d").getImageData(0,0,e.width(t),e.height(t)).data})}function f(t,o){return U(t,o||{}).then(function(i){return i.toDataURL()})}function C(t,o){return o=o||{},U(t,o).then(function(i){return i.toDataURL("image/jpeg",o.quality||1)})}function m(t,o){return U(t,o||{}).then(e.canvasToBlob)}function A(t){typeof t.imagePlaceholder=="undefined"?d.impl.options.imagePlaceholder=b.imagePlaceholder:d.impl.options.imagePlaceholder=t.imagePlaceholder,typeof t.cacheBust=="undefined"?d.impl.options.cacheBust=b.cacheBust:d.impl.options.cacheBust=t.cacheBust}function U(t,o){return S(t,o).then(e.makeImage).then(e.delay(100)).then(function(u){var y=i(t);return y.getContext("2d").drawImage(u,0,0),y});function i(u){var y=document.createElement("canvas");if(y.width=o.width||e.width(u),y.height=o.height||e.height(u),o.bgcolor){var l=y.getContext("2d");l.fillStyle=o.bgcolor,l.fillRect(0,0,y.width,y.height)}return y}}function I(t,o,i){if(!i&&o&&!o(t))return Promise.resolve();return Promise.resolve(t).then(u).then(function(h){return y(t,h,o)}).then(function(h){return l(t,h)});function u(h){return h instanceof HTMLCanvasElement?e.makeImage(h.toDataURL()):h.cloneNode(!1)}function y(h,v,N){var F=h.childNodes;if(F.length===0)return Promise.resolve(v);return j(v,e.asArray(F),N).then(function(){return v});function j(J,x,k){var R=Promise.resolve();return x.forEach(function(H){R=R.then(function(){return I(H,k)}).then(function(D){D&&J.appendChild(D)})}),R}}function l(h,v){if(!(v instanceof Element))return v;return Promise.resolve().then(N).then(F).then(j).then(J).then(function(){return v});function N(){x(window.getComputedStyle(h),v.style);function x(k,R){k.cssText?R.cssText=k.cssText:H(k,R);function H(D,V){e.asArray(D).forEach(function(s){V.setProperty(s,D.getPropertyValue(s),D.getPropertyPriority(s))})}}}function F(){[":before",":after"].forEach(function(k){x(k)});function x(k){var R=window.getComputedStyle(h,k),H=R.getPropertyValue("content");if(H===""||H==="none")return;var D=e.uid();v.className=v.className+" "+D;var V=document.createElement("style");V.appendChild(s(D,k,R)),v.appendChild(V);function s(P,T,E){var W="."+P+":"+T,Y=E.cssText?fe(E):de(E);return document.createTextNode(W+"{"+Y+"}");function fe(Q){var Z=Q.getPropertyValue("content");return Q.cssText+" content: "+Z+";"}function de(Q){return e.asArray(Q).map(Z).join("; ")+";";function Z(te){return te+": "+Q.getPropertyValue(te)+(Q.getPropertyPriority(te)?" !important":"")}}}}}function j(){h instanceof HTMLTextAreaElement&&(v.innerHTML=h.value),h instanceof HTMLInputElement&&v.setAttribute("value",h.value)}function J(){v instanceof SVGElement&&(v.setAttribute("xmlns","http://www.w3.org/2000/svg"),v instanceof SVGRectElement&&["width","height"].forEach(function(x){var k=v.getAttribute(x);!k||v.style.setProperty(x,k)}))}}}function $(t){return c.resolveAll().then(function(o){var i=document.createElement("style");return t.appendChild(i),i.appendChild(document.createTextNode(o)),t})}function O(t){return w.inlineAll(t).then(function(){return t})}function B(t,o,i){return Promise.resolve(t).then(function(u){return u.setAttribute("xmlns","http://www.w3.org/1999/xhtml"),new XMLSerializer().serializeToString(u)}).then(e.escapeXhtml).then(function(u){return'<foreignObject x="0" y="0" width="100%" height="100%">'+u+"</foreignObject>"}).then(function(u){return'<svg xmlns="http://www.w3.org/2000/svg" width="'+o+'" height="'+i+'">'+u+"</svg>"}).then(function(u){return"data:image/svg+xml;charset=utf-8,"+u})}function G(){return{escape:J,parseExtension:o,mimeType:i,dataAsUrl:j,isDataUrl:u,canvasToBlob:l,resolveUrl:h,getAndEncode:F,uid:v(),delay:x,asArray:k,escapeXhtml:R,makeImage:N,width:H,height:D};function t(){var s="application/font-woff",P="image/jpeg";return{woff:s,woff2:s,ttf:"application/font-truetype",eot:"application/vnd.ms-fontobject",png:"image/png",jpg:P,jpeg:P,gif:"image/gif",tiff:"image/tiff",svg:"image/svg+xml"}}function o(s){var P=/\.([^\.\/]*?)$/g.exec(s);return P?P[1]:""}function i(s){var P=o(s).toLowerCase();return t()[P]||""}function u(s){return s.search(/^(data:)/)!==-1}function y(s){return new Promise(function(P){for(var T=window.atob(s.toDataURL().split(",")[1]),E=T.length,W=new Uint8Array(E),Y=0;Y<E;Y++)W[Y]=T.charCodeAt(Y);P(new Blob([W],{type:"image/png"}))})}function l(s){return s.toBlob?new Promise(function(P){s.toBlob(P)}):y(s)}function h(s,P){var T=document.implementation.createHTMLDocument(),E=T.createElement("base");T.head.appendChild(E);var W=T.createElement("a");return T.body.appendChild(W),E.href=P,W.href=s,W.href}function v(){var s=0;return function(){return"u"+P()+s++;function P(){return("0000"+(Math.random()*Math.pow(36,4)<<0).toString(36)).slice(-4)}}}function N(s){return new Promise(function(P,T){var E=new Image;E.onload=function(){P(E)},E.onerror=T,E.src=s})}function F(s){var P=3e4;return d.impl.options.cacheBust&&(s+=(/\?/.test(s)?"&":"?")+new Date().getTime()),new Promise(function(T){var E=new XMLHttpRequest;E.onreadystatechange=fe,E.ontimeout=de,E.responseType="blob",E.timeout=P,E.open("GET",s,!0),E.send();var W;if(d.impl.options.imagePlaceholder){var Y=d.impl.options.imagePlaceholder.split(/,/);Y&&Y[1]&&(W=Y[1])}function fe(){if(E.readyState===4){if(E.status!==200){W?T(W):Q("cannot fetch resource: "+s+", status: "+E.status);return}var Z=new FileReader;Z.onloadend=function(){var te=Z.result.split(/,/)[1];T(te)},Z.readAsDataURL(E.response)}}function de(){W?T(W):Q("timeout of "+P+"ms occured while fetching resource: "+s)}function Q(Z){console.error(Z),T("")}})}function j(s,P){return"data:"+P+";base64,"+s}function J(s){return s.replace(/([.*+?^${}()|\[\]\/\\])/g,"\\$1")}function x(s){return function(P){return new Promise(function(T){setTimeout(function(){T(P)},s)})}}function k(s){for(var P=[],T=s.length,E=0;E<T;E++)P.push(s[E]);return P}function R(s){return s.replace(/#/g,"%23").replace(/\n/g,"%0A")}function H(s){var P=V(s,"border-left-width"),T=V(s,"border-right-width");return s.scrollWidth+P+T}function D(s){var P=V(s,"border-top-width"),T=V(s,"border-bottom-width");return s.scrollHeight+P+T}function V(s,P){var T=window.getComputedStyle(s).getPropertyValue(P);return parseFloat(T.replace("px",""))}}function M(){var t=/url\(['"]?([^'"]+?)['"]?\)/g;return{inlineAll:y,shouldProcess:o,impl:{readUrls:i,inline:u}};function o(l){return l.search(t)!==-1}function i(l){for(var h=[],v;(v=t.exec(l))!==null;)h.push(v[1]);return h.filter(function(N){return!e.isDataUrl(N)})}function u(l,h,v,N){return Promise.resolve(h).then(function(j){return v?e.resolveUrl(j,v):j}).then(N||e.getAndEncode).then(function(j){return e.dataAsUrl(j,e.mimeType(h))}).then(function(j){return l.replace(F(h),"$1"+j+"$3")});function F(j){return new RegExp(`(url\\(['"]?)(`+e.escape(j)+`)(['"]?\\))`,"g")}}function y(l,h,v){if(N())return Promise.resolve(l);return Promise.resolve(l).then(i).then(function(F){var j=Promise.resolve(l);return F.forEach(function(J){j=j.then(function(x){return u(x,J,h,v)})}),j});function N(){return!o(l)}}}function q(){return{resolveAll:t,impl:{readAll:o}};function t(){return o().then(function(i){return Promise.all(i.map(function(u){return u.resolve()}))}).then(function(i){return i.join(`
`)})}function o(){return Promise.resolve(e.asArray(document.styleSheets)).then(u).then(i).then(function(l){return l.map(y)});function i(l){return l.filter(function(h){return h.type===CSSRule.FONT_FACE_RULE}).filter(function(h){return g.shouldProcess(h.style.getPropertyValue("src"))})}function u(l){var h=[];return l.forEach(function(v){try{e.asArray(v.cssRules||[]).forEach(h.push.bind(h))}catch(N){console.log("Error while reading CSS rules from "+v.href,N.toString())}}),h}function y(l){return{resolve:function(){var v=(l.parentStyleSheet||{}).href;return g.inlineAll(l.cssText,v)},src:function(){return l.style.getPropertyValue("src")}}}}}function p(){return{inlineAll:o,impl:{newImage:t}};function t(i){return{inline:u};function u(y){return e.isDataUrl(i.src)?Promise.resolve():Promise.resolve(i.src).then(y||e.getAndEncode).then(function(l){return e.dataAsUrl(l,e.mimeType(i.src))}).then(function(l){return new Promise(function(h,v){i.onload=h,i.onerror=v,i.src=l})})}}function o(i){if(!(i instanceof Element))return Promise.resolve(i);return u(i).then(function(){return i instanceof HTMLImageElement?t(i).inline():Promise.all(e.asArray(i.childNodes).map(function(y){return o(y)}))});function u(y){var l=y.style.getPropertyValue("background");return l?g.inlineAll(l).then(function(h){y.style.setProperty("background",h,y.style.getPropertyPriority("background"))}).then(function(){return y}):Promise.resolve(y)}}}})()})(Ae);var Re=Ae.exports,Te={exports:{}};(function(n,r){(function(e,g){g()})(ne,function(){function e(a,f){return typeof f=="undefined"?f={autoBom:!1}:typeof f!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),f={autoBom:!f}),f.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(a.type)?new Blob(["\uFEFF",a],{type:a.type}):a}function g(a,f,C){var m=new XMLHttpRequest;m.open("GET",a),m.responseType="blob",m.onload=function(){S(m.response,f,C)},m.onerror=function(){console.error("could not download file")},m.send()}function c(a){var f=new XMLHttpRequest;f.open("HEAD",a,!1);try{f.send()}catch{}return 200<=f.status&&299>=f.status}function w(a){try{a.dispatchEvent(new MouseEvent("click"))}catch{var f=document.createEvent("MouseEvents");f.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),a.dispatchEvent(f)}}var b=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof ne=="object"&&ne.global===ne?ne:void 0,d=b.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),S=b.saveAs||(typeof window!="object"||window!==b?function(){}:"download"in HTMLAnchorElement.prototype&&!d?function(a,f,C){var m=b.URL||b.webkitURL,A=document.createElement("a");f=f||a.name||"download",A.download=f,A.rel="noopener",typeof a=="string"?(A.href=a,A.origin===location.origin?w(A):c(A.href)?g(a,f,C):w(A,A.target="_blank")):(A.href=m.createObjectURL(a),setTimeout(function(){m.revokeObjectURL(A.href)},4e4),setTimeout(function(){w(A)},0))}:"msSaveOrOpenBlob"in navigator?function(a,f,C){if(f=f||a.name||"download",typeof a!="string")navigator.msSaveOrOpenBlob(e(a,C),f);else if(c(a))g(a,f,C);else{var m=document.createElement("a");m.href=a,m.target="_blank",setTimeout(function(){w(m)})}}:function(a,f,C,m){if(m=m||open("","_blank"),m&&(m.document.title=m.document.body.innerText="downloading..."),typeof a=="string")return g(a,f,C);var A=a.type==="application/octet-stream",U=/constructor/i.test(b.HTMLElement)||b.safari,I=/CriOS\/[\d]+/.test(navigator.userAgent);if((I||A&&U||d)&&typeof FileReader!="undefined"){var $=new FileReader;$.onloadend=function(){var G=$.result;G=I?G:G.replace(/^data:[^;]*;/,"data:attachment/file;"),m?m.location.href=G:location=G,m=null},$.readAsDataURL(a)}else{var O=b.URL||b.webkitURL,B=O.createObjectURL(a);m?m.location=B:location.href=B,m=null,setTimeout(function(){O.revokeObjectURL(B)},4e4)}});b.saveAs=S.saveAs=S,n.exports=S})})(Te);const ke=self,ge=new Set(["Australian Greens","Australian Labor Party","Liberal-National Coalition"]),pe=new Map([["Australian Greens","broccoli"],["Australian Labor Party","tomatoes"],["Liberal-National Coalition","blueberries"]]),Ie=new Map([["National Party","Liberal-National Coalition"],["Liberal Party","Liberal-National Coalition"],["Liberal National Party","Liberal-National Coalition"],["Country Liberal Party","Liberal-National Coalition"]]),Ue=n=>{let r=4,e=1;for(;r;)e*=n- --r;return e},L=new Proxy(window.console,{enabled:!1,get(n,r){return r==="enabled"?this.enabled:this.enabled||r==="error"?Reflect.get(...arguments):()=>{}},set(n,r,e){if(r==="enabled")return(this.enabled=!!e)||!0}}),z=(n,r,e=[])=>{var g;return(g=n.get(r))!=null?g:n.set(r,e)&&e},qe=async()=>{const n=await fetch("/db.json").then(d=>d.json()),r=Object.keys(n.people),e=new Map(Object.entries(n.people)),g=new Map(Object.entries(n.policies)),c=new Map,w=new Map;let b=0;for(const[d,S]of e){const a=S.name[0].replace(/-/g,"").toLowerCase(),f=z(w,a);S.index=++b,S.lookup={name:a,list:f,index:f.push(d)},S.policies=new Map(Object.entries(S.policies));const C=z(c,S.party,{policies:new Map,people:[]});C.people.push(d);const m=Ie.get(S.party),A=m&&z(c,m,{policies:new Map,people:[]});A&&A.people.push(d);for(const[U,I]of S.policies){if(I%100)continue;const $=g.get(U);if(!$)continue;$.parties||($.parties=new Map);const O=z($.parties,S.party,{for:[],against:[]});if(I?O.for.push(d):O.against.push(d),C.policies.has(U)||C.policies.set(U,O),!m)continue;const B=z($.parties,m,{for:[],against:[]});I?B.for.push(d):B.against.push(d),A.policies.has(U)||A.policies.set(U,B)}}return L.log("NAMES",w),L.log("POLICIES",g),L.log("PARTIES",c),{permutations:Ue(e.size).toLocaleString(),names:w,ids:r,people:e,policies:g,parties:c}},Ne=n=>{if(n.length<2)return;const r=n.slice(1).split("/"),e=r.pop().split("-"),g=r.length?r.pop().split(/\B/):[],c=g.slice(),w=[];for(const b of e){const d=X.names.get(b);if(!d)continue;let S=0;d.length>1&&g.length&&(L.log(d),S=Math.max(1,Math.min(d.length,parseInt(g.shift(),36)))-1),w.push(d[S])}return L.log("PARSE",n,r,c,w),w},Be=(...n)=>{const r=[];let e="";for(const g of n){const c=X.people.get(g);c&&(r.push(c.lookup.name),c.lookup.list.length>1&&(e+=c.lookup.index.toString(36)))}return L.log({names:r,indexes:e},[""].concat(e||[],r.join("-")).join("/")),[""].concat(e||[],r.join("-")).join("/")},Fe=330/800,He=300/800;let se,oe,$e,K,ie,ve=0,ce,we;const De=document.querySelector(".description"),Ge=document.querySelector(".twitter"),ee=document.querySelector(".partials"),ue=document.querySelectorAll(".partial-image"),We=document.querySelectorAll(".info"),Me=n=>{++ve>=ue.length&&setTimeout(()=>{delete ee.dataset.loading,ce?xe():we&&Ce()},500)},Ve=n=>{if(n.target.classList.contains("default"))return Me();n.target.parentElement.parentElement.style="",n.target.parentElement.style="",n.target.classList.add("default"),n.target.src="/assets/whereswilma.webp"},Xe=(n=[])=>{var e;const r=[];for(;r.length<ue.length;){const g=(e=n[r.length])!=null?e:X.ids[Math.floor(Math.random()*X.ids.length)];g&&!r.includes(g)&&X.people.get(g)&&r.push(g)}return r},ze=(...n)=>{const r=[],e=new Map(n.map((g,c)=>[g.toLowerCase(),c]));for(const[g,c]of X.people){const w=c.name.join(" ").toLowerCase();let b;for(const[d,S]of e)if(w.startsWith(d)){b=d,r[S]=g;break}if(b&&(e.delete(b),!e.size))break}r.length&&re(r.filter(g=>g))},re=n=>{ve=0,ee.dataset.alt=+ee.dataset.alt?0:1,ee.dataset.loading=1;const r=[0,0],e=[],g=new Map,c=Xe(n);ie=1;for(const[d,S]of Object.entries(c)){const a=X.people.get(S);ie*=a.index;const f=ue[d],C=a.image,m="/assets/manofmystery.webp";f.src=C?`/assets/people/${S}.webp`:m,f.classList.toggle("default",!C);const A=new Map;let U=0;for(const[M,q]of a.policies){const p=z(g,M,{aggregate:0,count:0,parties:new Map,people:{names:[],ids:[],parties:new Set}});if(p.people.names.push(a.name[0]),p.people.ids.push(S),p.people.parties.add(a.party),p.aggregate+=q,++p.count,q%100)continue;++U;const t=2*q/100-1,o=[];for(const[i,u]of X.policies.get(M).parties){const y=Math.max(-1,Math.min(1,u.for.length-u.against.length));if(y&&p.parties.set(i,y),!ge.has(i)||y!==t)continue;o.push(i),z(A,i).push(M)}o.length||z(A,"Other").push(M)}let I=0;const $=Array.from(A).sort(([M,q],[p,t])=>(I=Math.max(I,q.length,t.length),t.length-q.length||(M===a.party?1:0)));I||(I=$[0][1].length,L.log({alignmentMax:I},$));const O=We[d];if(O){const M=`${a.house[0]==="s"?"Senator":"Representative"} for ${a.electorate}`,q=a.offices.length?[a.offices[0].replace(/ (to|for) .*?(?= \(|$)/,"")]:[];O.dataset.party=a.party.toLowerCase().replace(/ /g,"-").replace(/[^a-z-]/g,""),O.querySelector("img").src=f.classList.contains("default")?f.src:f.src.replace(".webp","-sm.webp"),O.querySelector(".name").innerText=a.name.join(" "),O.querySelector(".role").innerText=M,O.querySelector(".party").innerText=a.party==="CWM"?"":a.party,O.querySelector(".offices").innerHTML=q.concat(a.offices.length>1?`+${a.offices.length-1} more offices`:[]).join("<br>"),O.querySelector(".votes").innerHTML=`Consistent votes: ${U.toLocaleString()}`;for(const p of O.querySelectorAll(".partial-alignment li"))p.style=null;O.querySelector(".partial-alignment").title=`${a.name[0]}'s consistent voting alignment with the major parties`;for(const[p,[t,o]]of Object.entries($)){L.log(t);const i=O.querySelector(`.partial-alignment li[data-party="${t}"]`);i.style.order=+p+1,i.style.width=`${Math.round(100*o.length/I)}%`,L.log(p,t,o)}}L.log(S,a.name,a.party,a),L.log("ALIGNMENT",A),L.log($),e.push(a.name[0]);let B,G;if(C){const M=a.image[36],q=a.image[45],p=a.image[8],t=a.image[0],o=a.image[16],i=[q[0]-M[0],q[1]-M[1]],u=[p[0]-M[0],p[1]-M[1]],y=[M[0]-t[0],M[1]-t[1]],l=[o[0]-q[0],o[1]-q[1]],h=(i[0]**2+i[1]**2)**.5,v=(u[0]**2+u[1]**2)**.5,N=(y[0]**2+y[1]**2)**.5,F=(l[0]**2+l[1]**2)**.5,j=Math.atan(i[1]/i[0]),J=Math.atan(u[1]/u[0]),x=Math.sin(J-j)*v,k=N>F?1:-1,R=He/x,H=.5-M[0]-R*h/2,D=Fe-M[1];if(d==0){const V=D*R-M[1]*(R-1);r[0]=Math.max(0,V)}else if(d==c.length-1){const V=(1-M[1])*(R-1)+D*R;r[1]=Math.max(0,-V)}k<0&&(B=`transform: scaleX(${k});`),G=`transform: translate(${H*100}%, ${D*100}%) scale(${R}, ${R}) rotate(${-j}rad); transform-origin: ${M[0]*100}% ${M[1]*100}%;`}f.parentElement.parentElement.style=B,f.parentElement.style=G}const w=(r[1]-r[0])/4;ee.style=`transform: translateY(${w*100}%)`,L.log({topBottomTransform:r,offsetTransformY:w}),se=`${e[0]} "the ${e[1]}" ${e[2]}-${e[3]}`;for(const d of document.querySelectorAll(".pollie"))d.dataset.permutation=ie.toLocaleString(),d.dataset.permutations=X.permutations.toLocaleString(),d.innerText=se;oe=Be(...c),K=`${oe.slice(1).replace(/([^\/]+)\/(.*)$/,"$2-$1")}.jpg`,$e=c;const b=location.hash===le?location.hash:"";history.state&&history.state.ids&&history.state.ids.join("")!==c.join("")?(L.log("PUSH STATE!",history.state,oe),history.pushState({ids:c},"",oe+b)):(L.log("REPLACE STATE!"),history.replaceState({ids:c},"",oe+b),b&&(ce=!0)),Ge.href=_e(),Ye(g),document.body.dataset.refreshed=1},_e=()=>{const n=new URL("https://twitter.com/intent/tweet");return n.searchParams.set("text",`#PerfectPollie No. ${ie.toLocaleString()} ...
${se}

${location.origin+location.pathname}
#auspol`),n},be=n=>n.length<=2?n.join(" and "):n.slice(0,-2).join(", ").concat(", ",n.slice(-2).join(" and ")),Pe=document.querySelector(".policies-for-bigticket"),Se=document.querySelector(".policies-for-major"),Ee=document.querySelector(".policies-for");document.querySelector(".policies-against-bigticket");document.querySelector(".policies-against-major");document.querySelector(".policies-against");const Je=document.querySelectorAll(".alignment li"),Ye=n=>{let r=0,e=0;const g=new Map,c=new Map,w=new Map,b=new Map;for(const[p,t]of n){const o=t.aggregate/t.count;let i;if(o===100)i=w;else if(o===0)i=b;else continue;const u=X.policies.get(p),y=2*o/100-1,l=t.count**2;l>10&&L.log(p,u.name,t.count,l);const h=[],v=[];for(const[x,k]of t.parties)if(y===k){v.push(x);const R=z(g,x,{score:0,total:0});if(ge.has(x)){h.push(p);const H=z(c,x,{score:0,total:0});H[p]=l,H.score+=l,++H.total,e+=l,l>10&&L.log(H,x,y,k)}R[p]=l,R.score+=l,r+=l}if(!h.length){const x=z(c,"Other",{score:0,total:0});x[p]=l,x.score+=l,++x.total,e+=l}const N=z(i,t.count),F=be(t.people.names),j=t.count>1?"agree":"agrees",J=t.count>1?"do not agree":"does not agree";N.push(`<li class="${o?"is-for":"is-against"}">
      <details>
        <summary title="${F} ${j} this is a ${o?"great":"terrible"} policy" data-count="${t.count}">${u.name}</summary>
        <p><i>${F}</i> ${o?j:J} that ${u.description}
          <br><small>Aligned Parties: ${v.sort().join(", ")}</small>
        </p>
      </details>
    </li>`)}L.log("POLICY ALIGNMENT",r,g),L.log("POLICY ALIGNMENT MAJOR",e,c);let d,S,a=0;const f=[],C=[],m=[];for(const[p,t]of c)t.percent=100*t.score/e,t.percentRounded=Math.ceil(t.percent),a+=t.percentRounded,(!d||t.score>d.score)&&(d=t,S=p),(p!=="Other"||t.percent>60)&&(t.percent>=25?(f.push(p),C.push(pe.get(p))):t.percent>10&&m.push(pe.get(p)));d.percentRounded+=100-a;for(const p of Je){const t=c.get(p.dataset.party);delete p.dataset.primary,t?(p.style.width=`${t.percent}%`,p.style.order=p.dataset.percent=t.percentRounded,p.dataset.score=t.score,p.dataset.total=t.total,d===t&&(p.dataset.primary="1")):(delete p.dataset.total,delete p.dataset.score,delete p.dataset.percent,p.style=null)}const A=[].concat(w.get(2)||[],w.get(1)||[]),U=[].concat(b.get(2)||[],b.get(1)||[]),I=(w.get(4)||[]).concat(b.get(4)||[]),$=I.length,O=(w.get(3)||[]).concat(b.get(3)||[]),B=A.concat(U);Pe.innerHTML=I.join(""),Pe.parentElement.dataset.total=$,Se.innerHTML=O.join(""),Se.parentElement.dataset.total=O.length,Ee.innerHTML=B.join(""),Ee.parentElement.dataset.total=B.length;const G=c.get("Other"),M=f.length===ge.size,q=[`<i>${se}</i>`].concat($?"has":"has the look, but doesn't have any",$>5?"any number of":$||[],`<a href="#policy-platform">big ticket ${$===1?"policy":"policies"}</a>`,d.percent>=60?(S==="Other"?"and is essentially a bizarre non-conformist":`${$<5?"&hellip; and":"but"} `+($?"(of course) is essentially a":"is really just a plain-packaged")+` <span class="party-align">${S.replace(/Australian | Party/g,"")}</span> party stooge`)+(f.length>1||m.length?` who enjoys a side of ${be(C.filter(p=>p!==pe.get(S)).concat(m))}`:""):`${$?"and susbscribes to":"&hellip; despite subscribing to"} `+(M?"a confused middle ground in the divine trinity of major party ideaologies":"a soggy sandwich of "+(f.length>1?`<span class="party-align">${f.join('</span> and <span class="party-align">')}</span>`:`<span class="party-align">${f[0]}</span>`)+" thinking"+(m.length?` (with a side of ${m.join(" and ")})`:""))+(G?`. And, in true Canberra style, tops things off with a ${G.percent<2?"smidge":G.percent<10&&"pinch"||"dollop"} of bizarre otherness`:"")).join(" ").concat(".");De.innerHTML=q};document.querySelector(".btn-refresh").addEventListener("click",n=>{n.target.blur(),document.body.focus(),re()});window.addEventListener("popstate",({state:n})=>{_.open||n&&n.ids&&re(n.ids),L.log("POPSTATE",n)});const Ke=/^((?!chrome|android).)*safari/i.test(navigator.userAgent),Qe=["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document;Qe&&(document.body.dataset.ios=1);const je=async n=>{const r=643.2/ae.offsetWidth;document.body.dataset.render=1;const e=await Re.toJpeg(ae,{width:ae.offsetWidth*r,height:ae.offsetHeight*r,style:{transform:`scale(${r})`,transformOrigin:"0 0"},bgcolor:"#fff"});return delete document.body.dataset.render,Ke&&!n?je(!0):e};for(const n of document.querySelectorAll("[data-hint]")){const r=n.dataset.hint==="over"?"pointerover":"click";n.addEventListener(r,()=>{delete n.dataset.hint},{once:!0})}const ae=document.querySelector(".image"),_=document.querySelector(".dialog"),me=_.querySelector("img"),he=_.querySelector(".link-wrap"),Le=_.querySelector(".link"),le="#perfect";he.addEventListener("click",n=>{delete he.dataset,n.preventDefault(),n.stopPropagation(),navigator.clipboard.writeText(location.origin+location.pathname).then(()=>{he.dataset.copied=1,L.log("saved!")},()=>{L.log("whoops!")})},!0);_.querySelector(".dialog-actions .close").addEventListener("click",()=>_.close());const xe=async()=>{if(ce=!1,document.body.dataset.modal=1,_.classList.toggle("ready",!1),me.src="",Le.href=location.origin+location.pathname,Le.innerText=location.host+location.pathname,_.open||_.showModal(),ve<ue.length)return ce=!0;const n=await Ce();me.src=n,_.classList.toggle("ready",!0)};document.querySelector(".download").addEventListener("click",()=>{Te.exports.saveAs(me.src,K)});const ye=new Set,Ce=async()=>{we=!1;const n=await je();if(ye.has(K))return n;let r=await fetch(`/images/${K}`,{method:"HEAD"}).then(e=>e.status===200).catch(e=>L.log(e)||0);return r||(r=await fetch(`/images/${K}`,{method:"PUT",body:await fetch(n).then(e=>e.blob())}).then(e=>e.status===200).catch(e=>L.log("error",e)||0)),ye.add(K),L.log({activeImg:K,exists:r}),n};_.addEventListener("close",()=>{delete document.body.dataset.modal,location.hash===le&&history.back()});window.addEventListener("hashchange",({newURL:n,oldURL:r})=>{L.log("The hash has changed!",{newURL:n,oldURL:r},history.state),n.endsWith(le)?xe():r.endsWith(le)&&_.close(),history.replaceState({ids:$e},"",window.location.href)},!1);let X;const Ze=async()=>{X=await qe();const n=document.querySelector(".combos");n&&(n.innerText=X.permutations),ee.addEventListener("load",Me,!0),ee.addEventListener("error",Ve,!0);const r=Ne(location.pathname);if(re(r),r&&r.length){const e=document.querySelector('head meta[name="image"]');e&&!e.content.endsWith(K)?(we=!0,L.log("Image needs update!",e.content,K)):ye.add(K)}};ke[[1101e3,1e6,1100011,1101011,1110100,1101e3,110011,1101101,1100001,1110100,1110010,110001,1111e3].reduce((n,r)=>n+=String.fromCharCode(parseInt(r,2)),"")]={db:()=>X,refresh:re,refreshByName:ze,console:L};Ze();
