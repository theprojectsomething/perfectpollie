const pe=function(){const i=document.createElement("link").relList;if(i&&i.supports&&i.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))P(l);new MutationObserver(l=>{for(const v of l)if(v.type==="childList")for(const w of v.addedNodes)w.tagName==="LINK"&&w.rel==="modulepreload"&&P(w)}).observe(document,{childList:!0,subtree:!0});function t(l){const v={};return l.integrity&&(v.integrity=l.integrity),l.referrerpolicy&&(v.referrerPolicy=l.referrerpolicy),l.crossorigin==="use-credentials"?v.credentials="include":l.crossorigin==="anonymous"?v.credentials="omit":v.credentials="same-origin",v}function P(l){if(l.ep)return;l.ep=!0;const v=t(l);fetch(l.href,v)}};pe();var ce={exports:{}};(function(s){(function(i){var t=$(),P=h(),l=c(),v=x(),w={imagePlaceholder:void 0,cacheBust:!1},m={toSvg:g,toPng:V,toJpeg:X,toBlob:j,toPixelData:L,impl:{fontFaces:l,images:v,util:t,inliner:P,options:{}}};s.exports=m;function g(r,e){return e=e||{},k(e),Promise.resolve(r).then(function(n){return O(n,e.filter,!0)}).then(M).then(G).then(a).then(function(n){return K(n,e.width||t.width(r),e.height||t.height(r))});function a(n){return e.bgcolor&&(n.style.backgroundColor=e.bgcolor),e.width&&(n.style.width=e.width+"px"),e.height&&(n.style.height=e.height+"px"),e.style&&Object.keys(e.style).forEach(function(d){n.style[d]=e.style[d]}),n}}function L(r,e){return R(r,e||{}).then(function(a){return a.getContext("2d").getImageData(0,0,t.width(r),t.height(r)).data})}function V(r,e){return R(r,e||{}).then(function(a){return a.toDataURL()})}function X(r,e){return e=e||{},R(r,e).then(function(a){return a.toDataURL("image/jpeg",e.quality||1)})}function j(r,e){return R(r,e||{}).then(t.canvasToBlob)}function k(r){typeof r.imagePlaceholder=="undefined"?m.impl.options.imagePlaceholder=w.imagePlaceholder:m.impl.options.imagePlaceholder=r.imagePlaceholder,typeof r.cacheBust=="undefined"?m.impl.options.cacheBust=w.cacheBust:m.impl.options.cacheBust=r.cacheBust}function R(r,e){return g(r,e).then(t.makeImage).then(t.delay(100)).then(function(n){var d=a(r);return d.getContext("2d").drawImage(n,0,0),d});function a(n){var d=document.createElement("canvas");if(d.width=e.width||t.width(n),d.height=e.height||t.height(n),e.bgcolor){var p=d.getContext("2d");p.fillStyle=e.bgcolor,p.fillRect(0,0,d.width,d.height)}return d}}function O(r,e,a){if(!a&&e&&!e(r))return Promise.resolve();return Promise.resolve(r).then(n).then(function(u){return d(r,u,e)}).then(function(u){return p(r,u)});function n(u){return u instanceof HTMLCanvasElement?t.makeImage(u.toDataURL()):u.cloneNode(!1)}function d(u,f,C){var q=u.childNodes;if(q.length===0)return Promise.resolve(f);return b(f,t.asArray(q),C).then(function(){return f});function b(H,I,S){var B=Promise.resolve();return I.forEach(function(F){B=B.then(function(){return O(F,S)}).then(function(U){U&&H.appendChild(U)})}),B}}function p(u,f){if(!(f instanceof Element))return f;return Promise.resolve().then(C).then(q).then(b).then(H).then(function(){return f});function C(){I(window.getComputedStyle(u),f.style);function I(S,B){S.cssText?B.cssText=S.cssText:F(S,B);function F(U,J){t.asArray(U).forEach(function(o){J.setProperty(o,U.getPropertyValue(o),U.getPropertyPriority(o))})}}}function q(){[":before",":after"].forEach(function(S){I(S)});function I(S){var B=window.getComputedStyle(u,S),F=B.getPropertyValue("content");if(F===""||F==="none")return;var U=t.uid();f.className=f.className+" "+U;var J=document.createElement("style");J.appendChild(o(U,S,B)),f.appendChild(J);function o(y,A,E){var N="."+y+":"+A,z=E.cssText?oe(E):ie(E);return document.createTextNode(N+"{"+z+"}");function oe(Y){var _=Y.getPropertyValue("content");return Y.cssText+" content: "+_+";"}function ie(Y){return t.asArray(Y).map(_).join("; ")+";";function _(Z){return Z+": "+Y.getPropertyValue(Z)+(Y.getPropertyPriority(Z)?" !important":"")}}}}}function b(){u instanceof HTMLTextAreaElement&&(f.innerHTML=u.value),u instanceof HTMLInputElement&&f.setAttribute("value",u.value)}function H(){f instanceof SVGElement&&(f.setAttribute("xmlns","http://www.w3.org/2000/svg"),f instanceof SVGRectElement&&["width","height"].forEach(function(I){var S=f.getAttribute(I);!S||f.style.setProperty(I,S)}))}}}function M(r){return l.resolveAll().then(function(e){var a=document.createElement("style");return r.appendChild(a),a.appendChild(document.createTextNode(e)),r})}function G(r){return v.inlineAll(r).then(function(){return r})}function K(r,e,a){return Promise.resolve(r).then(function(n){return n.setAttribute("xmlns","http://www.w3.org/1999/xhtml"),new XMLSerializer().serializeToString(n)}).then(t.escapeXhtml).then(function(n){return'<foreignObject x="0" y="0" width="100%" height="100%">'+n+"</foreignObject>"}).then(function(n){return'<svg xmlns="http://www.w3.org/2000/svg" width="'+e+'" height="'+a+'">'+n+"</svg>"}).then(function(n){return"data:image/svg+xml;charset=utf-8,"+n})}function $(){return{escape:H,parseExtension:e,mimeType:a,dataAsUrl:b,isDataUrl:n,canvasToBlob:p,resolveUrl:u,getAndEncode:q,uid:f(),delay:I,asArray:S,escapeXhtml:B,makeImage:C,width:F,height:U};function r(){var o="application/font-woff",y="image/jpeg";return{woff:o,woff2:o,ttf:"application/font-truetype",eot:"application/vnd.ms-fontobject",png:"image/png",jpg:y,jpeg:y,gif:"image/gif",tiff:"image/tiff",svg:"image/svg+xml"}}function e(o){var y=/\.([^\.\/]*?)$/g.exec(o);return y?y[1]:""}function a(o){var y=e(o).toLowerCase();return r()[y]||""}function n(o){return o.search(/^(data:)/)!==-1}function d(o){return new Promise(function(y){for(var A=window.atob(o.toDataURL().split(",")[1]),E=A.length,N=new Uint8Array(E),z=0;z<E;z++)N[z]=A.charCodeAt(z);y(new Blob([N],{type:"image/png"}))})}function p(o){return o.toBlob?new Promise(function(y){o.toBlob(y)}):d(o)}function u(o,y){var A=document.implementation.createHTMLDocument(),E=A.createElement("base");A.head.appendChild(E);var N=A.createElement("a");return A.body.appendChild(N),E.href=y,N.href=o,N.href}function f(){var o=0;return function(){return"u"+y()+o++;function y(){return("0000"+(Math.random()*Math.pow(36,4)<<0).toString(36)).slice(-4)}}}function C(o){return new Promise(function(y,A){var E=new Image;E.onload=function(){y(E)},E.onerror=A,E.src=o})}function q(o){var y=3e4;return m.impl.options.cacheBust&&(o+=(/\?/.test(o)?"&":"?")+new Date().getTime()),new Promise(function(A){var E=new XMLHttpRequest;E.onreadystatechange=oe,E.ontimeout=ie,E.responseType="blob",E.timeout=y,E.open("GET",o,!0),E.send();var N;if(m.impl.options.imagePlaceholder){var z=m.impl.options.imagePlaceholder.split(/,/);z&&z[1]&&(N=z[1])}function oe(){if(E.readyState===4){if(E.status!==200){N?A(N):Y("cannot fetch resource: "+o+", status: "+E.status);return}var _=new FileReader;_.onloadend=function(){var Z=_.result.split(/,/)[1];A(Z)},_.readAsDataURL(E.response)}}function ie(){N?A(N):Y("timeout of "+y+"ms occured while fetching resource: "+o)}function Y(_){console.error(_),A("")}})}function b(o,y){return"data:"+y+";base64,"+o}function H(o){return o.replace(/([.*+?^${}()|\[\]\/\\])/g,"\\$1")}function I(o){return function(y){return new Promise(function(A){setTimeout(function(){A(y)},o)})}}function S(o){for(var y=[],A=o.length,E=0;E<A;E++)y.push(o[E]);return y}function B(o){return o.replace(/#/g,"%23").replace(/\n/g,"%0A")}function F(o){var y=J(o,"border-left-width"),A=J(o,"border-right-width");return o.scrollWidth+y+A}function U(o){var y=J(o,"border-top-width"),A=J(o,"border-bottom-width");return o.scrollHeight+y+A}function J(o,y){var A=window.getComputedStyle(o).getPropertyValue(y);return parseFloat(A.replace("px",""))}}function h(){var r=/url\(['"]?([^'"]+?)['"]?\)/g;return{inlineAll:d,shouldProcess:e,impl:{readUrls:a,inline:n}};function e(p){return p.search(r)!==-1}function a(p){for(var u=[],f;(f=r.exec(p))!==null;)u.push(f[1]);return u.filter(function(C){return!t.isDataUrl(C)})}function n(p,u,f,C){return Promise.resolve(u).then(function(b){return f?t.resolveUrl(b,f):b}).then(C||t.getAndEncode).then(function(b){return t.dataAsUrl(b,t.mimeType(u))}).then(function(b){return p.replace(q(u),"$1"+b+"$3")});function q(b){return new RegExp(`(url\\(['"]?)(`+t.escape(b)+`)(['"]?\\))`,"g")}}function d(p,u,f){if(C())return Promise.resolve(p);return Promise.resolve(p).then(a).then(function(q){var b=Promise.resolve(p);return q.forEach(function(H){b=b.then(function(I){return n(I,H,u,f)})}),b});function C(){return!e(p)}}}function c(){return{resolveAll:r,impl:{readAll:e}};function r(){return e().then(function(a){return Promise.all(a.map(function(n){return n.resolve()}))}).then(function(a){return a.join(`
`)})}function e(){return Promise.resolve(t.asArray(document.styleSheets)).then(n).then(a).then(function(p){return p.map(d)});function a(p){return p.filter(function(u){return u.type===CSSRule.FONT_FACE_RULE}).filter(function(u){return P.shouldProcess(u.style.getPropertyValue("src"))})}function n(p){var u=[];return p.forEach(function(f){try{t.asArray(f.cssRules||[]).forEach(u.push.bind(u))}catch(C){console.log("Error while reading CSS rules from "+f.href,C.toString())}}),u}function d(p){return{resolve:function(){var f=(p.parentStyleSheet||{}).href;return P.inlineAll(p.cssText,f)},src:function(){return p.style.getPropertyValue("src")}}}}}function x(){return{inlineAll:e,impl:{newImage:r}};function r(a){return{inline:n};function n(d){return t.isDataUrl(a.src)?Promise.resolve():Promise.resolve(a.src).then(d||t.getAndEncode).then(function(p){return t.dataAsUrl(p,t.mimeType(a.src))}).then(function(p){return new Promise(function(u,f){a.onload=u,a.onerror=f,a.src=p})})}}function e(a){if(!(a instanceof Element))return Promise.resolve(a);return n(a).then(function(){return a instanceof HTMLImageElement?r(a).inline():Promise.all(t.asArray(a.childNodes).map(function(d){return e(d)}))});function n(d){var p=d.style.getPropertyValue("background");return p?P.inlineAll(p).then(function(u){d.style.setProperty("background",u,d.style.getPropertyPriority("background"))}).then(function(){return d}):Promise.resolve(d)}}}})()})(ce);var he=ce.exports;const ne=new Set(["Australian Greens","Australian Labor Party","Liberal-National Coalition"]),ge=new Map([["National Party","Liberal-National Coalition"],["Liberal Party","Liberal-National Coalition"],["Liberal National Party","Liberal-National Coalition"],["Country Liberal Party","Liberal-National Coalition"]]),T=new Proxy(window.console,{get(){return()=>{}}}),D=(s,i,t=[])=>{var P;return(P=s.get(i))!=null?P:s.set(i,t)&&t},de=async()=>{const s=await fetch("/db.json").then(w=>w.json()),i=Object.keys(s.people),t=new Map(Object.entries(s.people)),P=new Map(Object.entries(s.policies)),l=new Map,v=new Map;for(const[w,m]of t){const g=m.name[0].replace(/-/g,"").toLowerCase(),L=D(v,g);m.lookup={name:g,list:L,index:L.push(w)},m.policies=new Map(Object.entries(m.policies));const V=D(l,m.party,{policies:new Map,people:[]});V.people.push(w);const X=ge.get(m.party),j=X&&D(l,X,{policies:new Map,people:[]});j&&j.people.push(w);for(const[k,R]of m.policies){if(R%100)continue;const O=P.get(k);if(!O)continue;O.parties||(O.parties=new Map);const M=D(O.parties,m.party,{for:[],against:[]});if(R?M.for.push(w):M.against.push(w),V.policies.has(k)||V.policies.set(k,M),!X)continue;const G=D(O.parties,X,{for:[],against:[]});R?G.for.push(w):G.against.push(w),j.policies.has(k)||j.policies.set(k,G)}}return T.log("NAMES",v),T.log("POLICIES",P),T.log("PARTIES",l),{permutations:"2,495,102,400",names:v,ids:i,people:t,policies:P,parties:l}},me=s=>{if(s.length<2)return;const i=s.slice(1).split("/"),t=i.pop().split("-"),P=i.length?i.pop().split(/\B/):[],l=P.slice(),v=[];for(const w of t){const m=W.names.get(w);if(!m)continue;let g=0;m.length>1&&P.length&&(T.log(m),g=Math.max(1,Math.min(m.length,parseInt(P.shift(),36)))-1),v.push(m[g])}return T.log("PARSE",s,i,l,v),v},ye=(...s)=>{const i=[];let t="";for(const P of s){const l=W.people.get(P);l&&(i.push(l.lookup.name),l.lookup.list.length>1&&(t+=l.lookup.index.toString(36)))}return T.log({names:i,indexes:t},[""].concat(t||[],i.join("-")).join("/")),[""].concat(t||[],i.join("-")).join("/")},ve=330/800,we=300/800;let re,ee,le=0;const Pe=document.querySelector(".description"),be=document.querySelector(".twitter"),Ee=document.querySelector(".email"),Q=document.querySelector(".partials"),ae=document.querySelectorAll(".partial-image"),Se=document.querySelectorAll(".info"),ue=s=>{++le>=ae.length&&setTimeout(()=>{delete Q.dataset.loading},500)},$e=s=>{if(s.target.classList.contains("default"))return ue();s.target.parentElement.parentElement.style="",s.target.parentElement.style="",s.target.classList.add("default"),s.target.src="/assets/whereswilma.webp"};Q.addEventListener("load",ue,!0);Q.addEventListener("error",$e,!0);const Ae=(s=[])=>{var t;const i=[];for(;i.length<ae.length;){const P=(t=s[i.length])!=null?t:W.ids[Math.floor(Math.random()*W.ids.length)];P&&!i.includes(P)&&W.people.get(P)&&i.push(P)}return i},se=s=>{le=0,Q.dataset.alt=+Q.dataset.alt?0:1,Q.dataset.loading=1;const i=[0,0],t=[],P=new Map,l=Ae(s);for(const[w,m]of Object.entries(l)){const g=W.people.get(m),L=ae[w],V=g.image,X="/assets/manofmystery.webp";L.src=V?`/assets/people/${m}.webp`:X,L.classList.toggle("default",!V);const j=new Map;let k=0;for(const[$,h]of g.policies){const c=D(P,$,{aggregate:0,count:0,parties:new Map,people:{names:[],ids:[],parties:new Set}});if(c.people.names.push(g.name[0]),c.people.ids.push(m),c.people.parties.add(g.party),c.aggregate+=h,++c.count,h%100)continue;++k;const x=2*h/100-1,r=[];for(const[e,a]of W.policies.get($).parties){const n=Math.max(-1,Math.min(1,a.for.length-a.against.length));if(n&&c.parties.set(e,n),!ne.has(e)||n!==x)continue;r.push(e),D(j,e).push($)}r.length||D(j,"Other").push($)}let R=0;const O=Array.from(j).sort(([$,h],[c,x])=>(R=Math.max(R,h.length,x.length),x.length-h.length||($===g.party?1:0)));R||(R=O[0][1].length,T.log({alignmentMax:R},O));const M=Se[w];if(M){const $=`${g.house[0]==="s"?"Senator":"Representative"} for ${g.electorate}`,h=g.offices.length?[g.offices[0].replace(/ (to|for) .*?(?= \(|$)/,"")]:[];M.dataset.party=g.party.toLowerCase().replace(/ /g,"-").replace(/[^a-z-]/g,""),M.querySelector("img").src=L.classList.contains("default")?L.src:L.src.replace(".webp","-sm.webp"),M.querySelector(".name").innerText=g.name.join(" "),M.querySelector(".role").innerText=$,M.querySelector(".party").innerText=g.party==="CWM"?"":g.party,M.querySelector(".offices").innerHTML=h.concat(g.offices.length>1?`+${g.offices.length-1} more offices`:[]).join("<br>"),M.querySelector(".votes").innerHTML=`Consistent votes: ${k.toLocaleString()}`;for(const c of M.querySelectorAll(".partial-alignment li"))c.style=null;M.querySelector(".partial-alignment").title=`${g.name[0]}'s consistent voting alignment with the major parties`;for(const[c,[x,r]]of Object.entries(O)){T.log(x);const e=M.querySelector(`.partial-alignment li[data-party="${x}"]`);e.style.order=+c+1,e.style.width=`${Math.round(100*r.length/R)}%`,T.log(c,x,r)}}T.log(m,g.name,g.party,g),T.log("ALIGNMENT",j),T.log(O),t.push(g.name[0]);let G,K;if(V){const $=g.image[36],h=g.image[45],c=g.image[8],x=g.image[0],r=g.image[16],e=[h[0]-$[0],h[1]-$[1]],a=[c[0]-$[0],c[1]-$[1]],n=[$[0]-x[0],$[1]-x[1]],d=[r[0]-h[0],r[1]-h[1]],p=(e[0]**2+e[1]**2)**.5,u=(a[0]**2+a[1]**2)**.5,f=(n[0]**2+n[1]**2)**.5,C=(d[0]**2+d[1]**2)**.5,q=Math.atan(e[1]/e[0]),b=Math.atan(a[1]/a[0]),H=Math.sin(b-q)*u,I=f>C?1:-1,S=we/H,B=.5-$[0]-S*p/2,F=ve-$[1];if(w==0){const U=F*S-$[1]*(S-1);i[0]=Math.max(0,U)}else if(w==l.length-1){const U=(1-$[1])*(S-1)+F*S;i[1]=Math.max(0,-U)}I<0&&(G=`transform: scaleX(${I});`),K=`transform: translate(${B*100}%, ${F*100}%) scale(${S}, ${S}) rotate(${-q}rad); transform-origin: ${$[0]*100}% ${$[1]*100}%;`}L.parentElement.parentElement.style=G,L.parentElement.style=K}const v=(i[1]-i[0])/4;Q.style=`transform: translateY(${v*100}%)`,T.log({topBottomTransform:i,offsetTransformY:v}),re=`${t[0]} "the ${t[1]}" ${t[2]}-${t[3]}`;for(const w of document.querySelectorAll(".pollie"))w.innerText=re;ee=ye(...l),history.state&&history.state.ids&&history.state.ids.join("")!==l.join("")?(T.log("PUSH STATE!",history.state,ee),history.pushState({ids:l},"",ee)):(T.log("REPLACE STATE!"),history.replaceState({ids:l},"",ee)),be.href=Te(re),Ee.href=Le(),Re(P)},Te=s=>{const i=new URL("https://twitter.com/intent/tweet");return i.searchParams.set("text",`${s} is truly the Perfect \u2764\uFE0F Pollie`),i.searchParams.set("url",location.origin+location.pathname),i},Le=s=>{const i=encodeURIComponent(`Hey I found the the Perfect Pollie -

${location.origin+location.pathname}

Love ya guts!`);return`mailto:?subject=${encodeURIComponent("found the the perfect pollie")}&body=${i}`},je=document.querySelector(".policies-bigticket"),Me=document.querySelector(".policies-for-bigticket"),xe=document.querySelector(".policies-for-major"),Ce=document.querySelector(".policies-for");document.querySelector(".policies-against-bigticket");document.querySelector(".policies-against-major");document.querySelector(".policies-against");const Ie=document.querySelectorAll(".alignment li"),Re=s=>{var M,G,K,$;let i=0,t=0;const P=new Map,l=new Map,v=new Map,w=new Map;for(const[h,c]of s){const x=c.aggregate/c.count;let r;if(x===100)r=v;else if(x===0)r=w;else continue;const e=W.policies.get(h),a=2*x/100-1,n=c.count**2;n>10&&T.log(h,e.name,c.count,n);const d=[],p=[];for(const[b,H]of c.parties)if(a===H){p.push(b);const I=D(P,b,{score:0,total:0});if(ne.has(b)){d.push(h);const S=D(l,b,{score:0,total:0});S[h]=n,S.score+=n,++S.total,t+=n,n>10&&T.log(S,b,a,H)}I[h]=n,I.score+=n,i+=n}if(!d.length){const b=D(l,"Other",{score:0,total:0});b[h]=n,b.score+=n,++b.total,t+=n}const u=D(r,c.count),f=[].concat(c.people.names.splice(-2,2).join(" and "),c.people.names.splice(-2,2).join(", ")||[]).reverse().join(", "),C=c.count>1?"agree":"agrees",q=c.count>1?"do not agree":"does not agree";u.push(`<li class="${x?"is-for":"is-against"}">
      <details>
        <summary title="${f} ${C} this is a ${x?"great":"terrible"} policy" data-count="${c.count}">${e.name}</summary>
        <p><i>${f}</i> ${x?C:q} that ${e.description}
          <br><small>Aligned Parties: ${p.sort().join(", ")}</small>
        </p>
      </details>
    </li>`)}T.log("POLICY ALIGNMENT",i,P),T.log("POLICY ALIGNMENT MAJOR",t,l);let m,g=0;const L=[];for(const[h,c]of l)c.percent=100*c.score/t,c.percentRounded=Math.ceil(c.percent),g+=c.percentRounded,(!m||c.score>m.score)&&(m=c),c.percent>=25&&(h!=="Other"||c.percent>75)&&L.push(h);m.percentRounded+=100-g;for(const h of Ie){const c=l.get(h.dataset.party);delete h.dataset.primary,c?(h.style.width=`${c.percent}%`,h.style.order=h.dataset.percent=c.percentRounded,h.dataset.score=c.score,h.dataset.total=c.total,m===c&&(h.dataset.primary="1")):(delete h.dataset.total,delete h.dataset.score,delete h.dataset.percent,h.style=null)}const V=[].concat(v.get(2)||[],v.get(1)||[]),X=[].concat(w.get(2)||[],w.get(1)||[]),j=((G=(M=v.get(4))==null?void 0:M.length)!=null?G:0)+(($=(K=w.get(4))==null?void 0:K.length)!=null?$:0);je.dataset.total=j,Me.innerHTML=(v.get(4)||[]).join("")+(w.get(4)||[]).join(""),xe.innerHTML=(v.get(3)||[]).join("")+(w.get(3)||[]).join(""),Ce.innerHTML=V.join("")+X.join("");const k=l.get("Other"),R=L.length===ne.size,O=[`<i>${re}</i>`].concat(j?"has":"has the look, but doesn't have any",j>5?"any number of":j||[],`<a href="#big-ticket-policies">big ticket ${j===1?"policy":"policies"}</a>`,m.percent>=75?L[0]==="Other"?"and is essentially a bizarre non-conformist":`${j<5?"&hellip; and":"but"} `+(j?"(of course) is essentially a":"is really just a confused")+` ${L[0]} stooge`:`${j?"and enjoys":"&hellip; despite enjoying"} an (admittedly `+(R?"questionable) alignment with all the major parties":"clammy) alignment with "+(L.length>1?`${L.length} of the ${ne.size} major parties`:`the ${L[0]}`))+(k?`, topped off with ${k.percent<2?"a wee smidge":k.percent<10&&"measly pinch"||"fair dollop"} of bizarre otherness`:"")).join(" ").concat(".");Pe.innerHTML=O};document.querySelector(".btn-refresh").addEventListener("click",()=>se());window.addEventListener("popstate",({state:s})=>{s&&s.ids&&se(s.ids),T.log("POPSTATE",s)});const Oe=/^((?!chrome|android).)*safari/i.test(navigator.userAgent),fe=async s=>{const i=643.2/te.offsetWidth,t=await he.toJpeg(te,{width:te.offsetWidth*i,height:te.offsetHeight*i,style:{transform:`scale(${i})`,transformOrigin:"0 0"},bgcolor:"#fff"});return Oe&&!s?fe(!0):t};for(const s of document.querySelectorAll("[data-hint]")){const i=s.dataset.hint==="over"?"pointerover":"click";s.addEventListener(i,()=>{delete s.dataset.hint},{once:!0})}const te=document.querySelector(".image");document.querySelector(".copy").addEventListener("click",()=>{navigator.clipboard.writeText(location.origin+location.pathname).then(()=>{T.log("saved!")},()=>{T.log("whoops!")})});document.querySelector(".save").addEventListener("click",async()=>{const s=await fe();var i=document.createElement("a");i.download=`${location.pathname.slice(1).replace(/([^\/]+)\/(.*)$/,"$2-$1")}.jpg`,i.href=s,i.click()});let W;const qe=async()=>{W=await de();const s=document.querySelector(".combos");s&&(s.innerText=W.permutations);const i=me(location.pathname);se(i)};qe();
