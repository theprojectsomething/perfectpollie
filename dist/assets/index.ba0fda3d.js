const pe=function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const c of document.querySelectorAll('link[rel="modulepreload"]'))P(c);new MutationObserver(c=>{for(const v of c)if(v.type==="childList")for(const w of v.addedNodes)w.tagName==="LINK"&&w.rel==="modulepreload"&&P(w)}).observe(document,{childList:!0,subtree:!0});function t(c){const v={};return c.integrity&&(v.integrity=c.integrity),c.referrerpolicy&&(v.referrerPolicy=c.referrerpolicy),c.crossorigin==="use-credentials"?v.credentials="include":c.crossorigin==="anonymous"?v.credentials="omit":v.credentials="same-origin",v}function P(c){if(c.ep)return;c.ep=!0;const v=t(c);fetch(c.href,v)}};pe();var ce={exports:{}};(function(u){(function(a){var t=$(),P=h(),c=s(),v=x(),w={imagePlaceholder:void 0,cacheBust:!1},m={toSvg:g,toPng:V,toJpeg:X,toBlob:j,toPixelData:L,impl:{fontFaces:c,images:v,util:t,inliner:P,options:{}}};u.exports=m;function g(r,e){return e=e||{},N(e),Promise.resolve(r).then(function(n){return O(n,e.filter,!0)}).then(M).then(G).then(i).then(function(n){return K(n,e.width||t.width(r),e.height||t.height(r))});function i(n){return e.bgcolor&&(n.style.backgroundColor=e.bgcolor),e.width&&(n.style.width=e.width+"px"),e.height&&(n.style.height=e.height+"px"),e.style&&Object.keys(e.style).forEach(function(d){n.style[d]=e.style[d]}),n}}function L(r,e){return R(r,e||{}).then(function(i){return i.getContext("2d").getImageData(0,0,t.width(r),t.height(r)).data})}function V(r,e){return R(r,e||{}).then(function(i){return i.toDataURL()})}function X(r,e){return e=e||{},R(r,e).then(function(i){return i.toDataURL("image/jpeg",e.quality||1)})}function j(r,e){return R(r,e||{}).then(t.canvasToBlob)}function N(r){typeof r.imagePlaceholder=="undefined"?m.impl.options.imagePlaceholder=w.imagePlaceholder:m.impl.options.imagePlaceholder=r.imagePlaceholder,typeof r.cacheBust=="undefined"?m.impl.options.cacheBust=w.cacheBust:m.impl.options.cacheBust=r.cacheBust}function R(r,e){return g(r,e).then(t.makeImage).then(t.delay(100)).then(function(n){var d=i(r);return d.getContext("2d").drawImage(n,0,0),d});function i(n){var d=document.createElement("canvas");if(d.width=e.width||t.width(n),d.height=e.height||t.height(n),e.bgcolor){var p=d.getContext("2d");p.fillStyle=e.bgcolor,p.fillRect(0,0,d.width,d.height)}return d}}function O(r,e,i){if(!i&&e&&!e(r))return Promise.resolve();return Promise.resolve(r).then(n).then(function(l){return d(r,l,e)}).then(function(l){return p(r,l)});function n(l){return l instanceof HTMLCanvasElement?t.makeImage(l.toDataURL()):l.cloneNode(!1)}function d(l,f,C){var q=l.childNodes;if(q.length===0)return Promise.resolve(f);return b(f,t.asArray(q),C).then(function(){return f});function b(H,I,S){var B=Promise.resolve();return I.forEach(function(F){B=B.then(function(){return O(F,S)}).then(function(U){U&&H.appendChild(U)})}),B}}function p(l,f){if(!(f instanceof Element))return f;return Promise.resolve().then(C).then(q).then(b).then(H).then(function(){return f});function C(){I(window.getComputedStyle(l),f.style);function I(S,B){S.cssText?B.cssText=S.cssText:F(S,B);function F(U,W){t.asArray(U).forEach(function(o){W.setProperty(o,U.getPropertyValue(o),U.getPropertyPriority(o))})}}}function q(){[":before",":after"].forEach(function(S){I(S)});function I(S){var B=window.getComputedStyle(l,S),F=B.getPropertyValue("content");if(F===""||F==="none")return;var U=t.uid();f.className=f.className+" "+U;var W=document.createElement("style");W.appendChild(o(U,S,B)),f.appendChild(W);function o(y,A,E){var k="."+y+":"+A,z=E.cssText?oe(E):ie(E);return document.createTextNode(k+"{"+z+"}");function oe(J){var Y=J.getPropertyValue("content");return J.cssText+" content: "+Y+";"}function ie(J){return t.asArray(J).map(Y).join("; ")+";";function Y(Z){return Z+": "+J.getPropertyValue(Z)+(J.getPropertyPriority(Z)?" !important":"")}}}}}function b(){l instanceof HTMLTextAreaElement&&(f.innerHTML=l.value),l instanceof HTMLInputElement&&f.setAttribute("value",l.value)}function H(){f instanceof SVGElement&&(f.setAttribute("xmlns","http://www.w3.org/2000/svg"),f instanceof SVGRectElement&&["width","height"].forEach(function(I){var S=f.getAttribute(I);!S||f.style.setProperty(I,S)}))}}}function M(r){return c.resolveAll().then(function(e){var i=document.createElement("style");return r.appendChild(i),i.appendChild(document.createTextNode(e)),r})}function G(r){return v.inlineAll(r).then(function(){return r})}function K(r,e,i){return Promise.resolve(r).then(function(n){return n.setAttribute("xmlns","http://www.w3.org/1999/xhtml"),new XMLSerializer().serializeToString(n)}).then(t.escapeXhtml).then(function(n){return'<foreignObject x="0" y="0" width="100%" height="100%">'+n+"</foreignObject>"}).then(function(n){return'<svg xmlns="http://www.w3.org/2000/svg" width="'+e+'" height="'+i+'">'+n+"</svg>"}).then(function(n){return"data:image/svg+xml;charset=utf-8,"+n})}function $(){return{escape:H,parseExtension:e,mimeType:i,dataAsUrl:b,isDataUrl:n,canvasToBlob:p,resolveUrl:l,getAndEncode:q,uid:f(),delay:I,asArray:S,escapeXhtml:B,makeImage:C,width:F,height:U};function r(){var o="application/font-woff",y="image/jpeg";return{woff:o,woff2:o,ttf:"application/font-truetype",eot:"application/vnd.ms-fontobject",png:"image/png",jpg:y,jpeg:y,gif:"image/gif",tiff:"image/tiff",svg:"image/svg+xml"}}function e(o){var y=/\.([^\.\/]*?)$/g.exec(o);return y?y[1]:""}function i(o){var y=e(o).toLowerCase();return r()[y]||""}function n(o){return o.search(/^(data:)/)!==-1}function d(o){return new Promise(function(y){for(var A=window.atob(o.toDataURL().split(",")[1]),E=A.length,k=new Uint8Array(E),z=0;z<E;z++)k[z]=A.charCodeAt(z);y(new Blob([k],{type:"image/png"}))})}function p(o){return o.toBlob?new Promise(function(y){o.toBlob(y)}):d(o)}function l(o,y){var A=document.implementation.createHTMLDocument(),E=A.createElement("base");A.head.appendChild(E);var k=A.createElement("a");return A.body.appendChild(k),E.href=y,k.href=o,k.href}function f(){var o=0;return function(){return"u"+y()+o++;function y(){return("0000"+(Math.random()*Math.pow(36,4)<<0).toString(36)).slice(-4)}}}function C(o){return new Promise(function(y,A){var E=new Image;E.onload=function(){y(E)},E.onerror=A,E.src=o})}function q(o){var y=3e4;return m.impl.options.cacheBust&&(o+=(/\?/.test(o)?"&":"?")+new Date().getTime()),new Promise(function(A){var E=new XMLHttpRequest;E.onreadystatechange=oe,E.ontimeout=ie,E.responseType="blob",E.timeout=y,E.open("GET",o,!0),E.send();var k;if(m.impl.options.imagePlaceholder){var z=m.impl.options.imagePlaceholder.split(/,/);z&&z[1]&&(k=z[1])}function oe(){if(E.readyState===4){if(E.status!==200){k?A(k):J("cannot fetch resource: "+o+", status: "+E.status);return}var Y=new FileReader;Y.onloadend=function(){var Z=Y.result.split(/,/)[1];A(Z)},Y.readAsDataURL(E.response)}}function ie(){k?A(k):J("timeout of "+y+"ms occured while fetching resource: "+o)}function J(Y){console.error(Y),A("")}})}function b(o,y){return"data:"+y+";base64,"+o}function H(o){return o.replace(/([.*+?^${}()|\[\]\/\\])/g,"\\$1")}function I(o){return function(y){return new Promise(function(A){setTimeout(function(){A(y)},o)})}}function S(o){for(var y=[],A=o.length,E=0;E<A;E++)y.push(o[E]);return y}function B(o){return o.replace(/#/g,"%23").replace(/\n/g,"%0A")}function F(o){var y=W(o,"border-left-width"),A=W(o,"border-right-width");return o.scrollWidth+y+A}function U(o){var y=W(o,"border-top-width"),A=W(o,"border-bottom-width");return o.scrollHeight+y+A}function W(o,y){var A=window.getComputedStyle(o).getPropertyValue(y);return parseFloat(A.replace("px",""))}}function h(){var r=/url\(['"]?([^'"]+?)['"]?\)/g;return{inlineAll:d,shouldProcess:e,impl:{readUrls:i,inline:n}};function e(p){return p.search(r)!==-1}function i(p){for(var l=[],f;(f=r.exec(p))!==null;)l.push(f[1]);return l.filter(function(C){return!t.isDataUrl(C)})}function n(p,l,f,C){return Promise.resolve(l).then(function(b){return f?t.resolveUrl(b,f):b}).then(C||t.getAndEncode).then(function(b){return t.dataAsUrl(b,t.mimeType(l))}).then(function(b){return p.replace(q(l),"$1"+b+"$3")});function q(b){return new RegExp(`(url\\(['"]?)(`+t.escape(b)+`)(['"]?\\))`,"g")}}function d(p,l,f){if(C())return Promise.resolve(p);return Promise.resolve(p).then(i).then(function(q){var b=Promise.resolve(p);return q.forEach(function(H){b=b.then(function(I){return n(I,H,l,f)})}),b});function C(){return!e(p)}}}function s(){return{resolveAll:r,impl:{readAll:e}};function r(){return e().then(function(i){return Promise.all(i.map(function(n){return n.resolve()}))}).then(function(i){return i.join(`
`)})}function e(){return Promise.resolve(t.asArray(document.styleSheets)).then(n).then(i).then(function(p){return p.map(d)});function i(p){return p.filter(function(l){return l.type===CSSRule.FONT_FACE_RULE}).filter(function(l){return P.shouldProcess(l.style.getPropertyValue("src"))})}function n(p){var l=[];return p.forEach(function(f){try{t.asArray(f.cssRules||[]).forEach(l.push.bind(l))}catch(C){console.log("Error while reading CSS rules from "+f.href,C.toString())}}),l}function d(p){return{resolve:function(){var f=(p.parentStyleSheet||{}).href;return P.inlineAll(p.cssText,f)},src:function(){return p.style.getPropertyValue("src")}}}}}function x(){return{inlineAll:e,impl:{newImage:r}};function r(i){return{inline:n};function n(d){return t.isDataUrl(i.src)?Promise.resolve():Promise.resolve(i.src).then(d||t.getAndEncode).then(function(p){return t.dataAsUrl(p,t.mimeType(i.src))}).then(function(p){return new Promise(function(l,f){i.onload=l,i.onerror=f,i.src=p})})}}function e(i){if(!(i instanceof Element))return Promise.resolve(i);return n(i).then(function(){return i instanceof HTMLImageElement?r(i).inline():Promise.all(t.asArray(i.childNodes).map(function(d){return e(d)}))});function n(d){var p=d.style.getPropertyValue("background");return p?P.inlineAll(p).then(function(l){d.style.setProperty("background",l,d.style.getPropertyPriority("background"))}).then(function(){return d}):Promise.resolve(d)}}}})()})(ce);var he=ce.exports;const ne=new Set(["Australian Greens","Australian Labor Party","Liberal-National Coalition"]),ge=new Map([["National Party","Liberal-National Coalition"],["Liberal Party","Liberal-National Coalition"],["Liberal National Party","Liberal-National Coalition"],["Country Liberal Party","Liberal-National Coalition"]]),T=new Proxy(window.console,{get(){return()=>{}}}),D=(u,a,t=[])=>{var P;return(P=u.get(a))!=null?P:u.set(a,t)&&t},de=async()=>{const u=await fetch("/db.json").then(w=>w.json()),a=Object.keys(u.people),t=new Map(Object.entries(u.people)),P=new Map(Object.entries(u.policies)),c=new Map,v=new Map;for(const[w,m]of t){const g=m.name[0].replace(/-/g,"").toLowerCase(),L=D(v,g);m.lookup={name:g,list:L,index:L.push(w)},m.policies=new Map(Object.entries(m.policies));const V=D(c,m.party,{policies:new Map,people:[]});V.people.push(w);const X=ge.get(m.party),j=X&&D(c,X,{policies:new Map,people:[]});j&&j.people.push(w);for(const[N,R]of m.policies){if(R%100)continue;const O=P.get(N);if(!O)continue;O.parties||(O.parties=new Map);const M=D(O.parties,m.party,{for:[],against:[]});if(R?M.for.push(w):M.against.push(w),V.policies.has(N)||V.policies.set(N,M),!X)continue;const G=D(O.parties,X,{for:[],against:[]});R?G.for.push(w):G.against.push(w),j.policies.has(N)||j.policies.set(N,G)}}return T.log("NAMES",v),T.log("POLICIES",P),T.log("PARTIES",c),{names:v,ids:a,people:t,policies:P,parties:c}},me=u=>{if(u.length<2)return;const a=u.slice(1).split("/"),t=a.pop().split("-"),P=a.length?a.pop().split(/\B/):[],c=P.slice(),v=[];for(const w of t){const m=_.names.get(w);if(!m)continue;let g=0;m.length>1&&P.length&&(T.log(m),g=Math.max(1,Math.min(m.length,parseInt(P.shift(),36)))-1),v.push(m[g])}return T.log("PARSE",u,a,c,v),v},ye=(...u)=>{const a=[];let t="";for(const P of u){const c=_.people.get(P);c&&(a.push(c.lookup.name),c.lookup.list.length>1&&(t+=c.lookup.index.toString(36)))}return T.log({names:a,indexes:t},[""].concat(t||[],a.join("-")).join("/")),[""].concat(t||[],a.join("-")).join("/")},ve=330/800,we=300/800;let re,ee,le=0;const Pe=document.querySelector(".description"),be=document.querySelector(".twitter"),Ee=document.querySelector(".email"),Q=document.querySelector(".partials"),ae=document.querySelectorAll(".partial-image"),Se=document.querySelectorAll(".info"),ue=u=>{++le>=ae.length&&setTimeout(()=>{delete Q.dataset.loading},500)},$e=u=>{if(u.target.classList.contains("default"))return ue();u.target.parentElement.parentElement.style="",u.target.parentElement.style="",u.target.classList.add("default"),u.target.src="/assets/whereswilma.webp"};Q.addEventListener("load",ue,!0);Q.addEventListener("error",$e,!0);const Ae=(u=[])=>{var t;const a=[];for(;a.length<ae.length;){const P=(t=u[a.length])!=null?t:_.ids[Math.floor(Math.random()*_.ids.length)];P&&!a.includes(P)&&_.people.get(P)&&a.push(P)}return a},se=u=>{le=0,Q.dataset.alt=+Q.dataset.alt?0:1,Q.dataset.loading=1;const a=[0,0],t=[],P=new Map,c=Ae(u);for(const[w,m]of Object.entries(c)){const g=_.people.get(m),L=ae[w],V=g.image,X="/assets/manofmystery.webp";L.src=V?`/assets/people/${m}.webp`:X,L.classList.toggle("default",!V);const j=new Map;let N=0;for(const[$,h]of g.policies){const s=D(P,$,{aggregate:0,count:0,parties:new Map,people:{names:[],ids:[],parties:new Set}});if(s.people.names.push(g.name[0]),s.people.ids.push(m),s.people.parties.add(g.party),s.aggregate+=h,++s.count,h%100)continue;++N;const x=2*h/100-1,r=[];for(const[e,i]of _.policies.get($).parties){const n=Math.max(-1,Math.min(1,i.for.length-i.against.length));if(n&&s.parties.set(e,n),!ne.has(e)||n!==x)continue;r.push(e),D(j,e).push($)}r.length||D(j,"Other").push($)}let R=0;const O=Array.from(j).sort(([$,h],[s,x])=>(R=Math.max(R,h.length,x.length),x.length-h.length||($===g.party?1:0)));R||(R=O[0][1].length,T.log({alignmentMax:R},O));const M=Se[w];if(M){const $=`${g.house[0]==="s"?"Senator":"Representative"} for ${g.electorate}`,h=g.offices.length?[g.offices[0].replace(/ (to|for) .*?(?= \(|$)/,"")]:[];M.dataset.party=g.party.toLowerCase().replace(/ /g,"-").replace(/[^a-z-]/g,""),M.querySelector("img").src=L.classList.contains("default")?L.src:L.src.replace(".webp","-sm.webp"),M.querySelector(".name").innerText=g.name.join(" "),M.querySelector(".role").innerText=$,M.querySelector(".party").innerText=g.party==="CWM"?"":g.party,M.querySelector(".offices").innerHTML=h.concat(g.offices.length>1?`+${g.offices.length-1} more offices`:[]).join("<br>"),M.querySelector(".votes").innerHTML=`Consistent votes: ${N.toLocaleString()}`;for(const s of M.querySelectorAll(".partial-alignment li"))s.style=null;M.querySelector(".partial-alignment").title=`${g.name[0]}'s consistent voting alignment with the major parties`;for(const[s,[x,r]]of Object.entries(O)){T.log(x);const e=M.querySelector(`.partial-alignment li[data-party="${x}"]`);e.style.order=+s+1,e.style.width=`${Math.round(100*r.length/R)}%`,T.log(s,x,r)}}T.log(m,g.name,g.party,g),T.log("ALIGNMENT",j),T.log(O),t.push(g.name[0]);let G,K;if(V){const $=g.image[36],h=g.image[45],s=g.image[8],x=g.image[0],r=g.image[16],e=[h[0]-$[0],h[1]-$[1]],i=[s[0]-$[0],s[1]-$[1]],n=[$[0]-x[0],$[1]-x[1]],d=[r[0]-h[0],r[1]-h[1]],p=(e[0]**2+e[1]**2)**.5,l=(i[0]**2+i[1]**2)**.5,f=(n[0]**2+n[1]**2)**.5,C=(d[0]**2+d[1]**2)**.5,q=Math.atan(e[1]/e[0]),b=Math.atan(i[1]/i[0]),H=Math.sin(b-q)*l,I=f>C?1:-1,S=we/H,B=.5-$[0]-S*p/2,F=ve-$[1];if(w==0){const U=F*S-$[1]*(S-1);a[0]=Math.max(0,U)}else if(w==c.length-1){const U=(1-$[1])*(S-1)+F*S;a[1]=Math.max(0,-U)}I<0&&(G=`transform: scaleX(${I});`),K=`transform: translate(${B*100}%, ${F*100}%) scale(${S}, ${S}) rotate(${-q}rad); transform-origin: ${$[0]*100}% ${$[1]*100}%;`}L.parentElement.parentElement.style=G,L.parentElement.style=K}const v=(a[1]-a[0])/4;Q.style=`transform: translateY(${v*100}%)`,T.log({topBottomTransform:a,offsetTransformY:v}),re=`${t[0]} "the ${t[1]}" ${t[2]}-${t[3]}`;for(const w of document.querySelectorAll(".pollie"))w.innerText=re;ee=ye(...c),history.state&&history.state.ids&&history.state.ids.join("")!==c.join("")?(T.log("PUSH STATE!",history.state,ee),history.pushState({ids:c},"",ee)):(T.log("REPLACE STATE!"),history.replaceState({ids:c},"",ee)),be.href=Te(re),Ee.href=Le(),Re(P)},Te=u=>{const a=new URL("https://twitter.com/intent/tweet");return a.searchParams.set("text",`${u} is truly the Perfect \u2764\uFE0F Pollie`),a.searchParams.set("url",location.origin+location.pathname),a},Le=u=>{const a=encodeURIComponent(`Hey I found the the Perfect Pollie -

${location.origin+location.pathname}

Love ya guts!`);return`mailto:?subject=${encodeURIComponent("found the the perfect pollie")}&body=${a}`},je=document.querySelector(".policies-bigticket"),Me=document.querySelector(".policies-for-bigticket"),xe=document.querySelector(".policies-for-major"),Ce=document.querySelector(".policies-for");document.querySelector(".policies-against-bigticket");document.querySelector(".policies-against-major");document.querySelector(".policies-against");const Ie=document.querySelectorAll(".alignment li"),Re=u=>{var M,G,K,$;let a=0,t=0;const P=new Map,c=new Map,v=new Map,w=new Map;for(const[h,s]of u){const x=s.aggregate/s.count;let r;if(x===100)r=v;else if(x===0)r=w;else continue;const e=_.policies.get(h),i=2*x/100-1,n=s.count**2;n>10&&T.log(h,e.name,s.count,n);const d=[],p=[];for(const[b,H]of s.parties)if(i===H){p.push(b);const I=D(P,b,{score:0,total:0});if(ne.has(b)){d.push(h);const S=D(c,b,{score:0,total:0});S[h]=n,S.score+=n,++S.total,t+=n,n>10&&T.log(S,b,i,H)}I[h]=n,I.score+=n,a+=n}if(!d.length){const b=D(c,"Other",{score:0,total:0});b[h]=n,b.score+=n,++b.total,t+=n}const l=D(r,s.count),f=[].concat(s.people.names.splice(-2,2).join(" and "),s.people.names.splice(-2,2).join(", ")||[]).reverse().join(", "),C=s.count>1?"agree":"agrees",q=s.count>1?"do not agree":"does not agree";l.push(`<li class="${x?"is-for":"is-against"}">
      <details>
        <summary title="${f} ${C} this is a ${x?"great":"terrible"} policy" data-count="${s.count}">${e.name}</summary>
        <p><i>${f}</i> ${x?C:q} that ${e.description}
          <br><small>Aligned Parties: ${p.sort().join(", ")}</small>
        </p>
      </details>
    </li>`)}T.log("POLICY ALIGNMENT",a,P),T.log("POLICY ALIGNMENT MAJOR",t,c);let m,g=0;const L=[];for(const[h,s]of c)s.percent=100*s.score/t,s.percentRounded=Math.ceil(s.percent),g+=s.percentRounded,(!m||s.score>m.score)&&(m=s),s.percent>=25&&(h!=="Other"||s.percent>75)&&L.push(h);m.percentRounded+=100-g;for(const h of Ie){const s=c.get(h.dataset.party);delete h.dataset.primary,s?(h.style.width=`${s.percent}%`,h.style.order=h.dataset.percent=s.percentRounded,h.dataset.score=s.score,h.dataset.total=s.total,m===s&&(h.dataset.primary="1")):(delete h.dataset.total,delete h.dataset.score,delete h.dataset.percent,h.style=null)}const V=[].concat(v.get(2)||[],v.get(1)||[]),X=[].concat(w.get(2)||[],w.get(1)||[]),j=((G=(M=v.get(4))==null?void 0:M.length)!=null?G:0)+(($=(K=w.get(4))==null?void 0:K.length)!=null?$:0);je.dataset.total=j,Me.innerHTML=(v.get(4)||[]).join("")+(w.get(4)||[]).join(""),xe.innerHTML=(v.get(3)||[]).join("")+(w.get(3)||[]).join(""),Ce.innerHTML=V.join("")+X.join("");const N=c.get("Other"),R=L.length===ne.size,O=[`<i>${re}</i>`].concat(j?"has":"has the look, but doesn't have any",j>5?"any number of":j||[],`<a href="#big-ticket-policies">big ticket ${j===1?"policy":"policies"}</a>`,m.percent>=75?L[0]==="Other"?"and is essentially a bizarre non-conformist":`${j<5?"&hellip; and":"but"} `+(j?"(of course) is essentially a":"is really just a confused")+` ${L[0]} stooge`:`${j?"and enjoys":"&hellip; despite enjoying"} an (admittedly `+(R?"questionable) alignment with all the major parties":"clammy) alignment with "+(L.length>1?`${L.length} of the ${ne.size} major parties`:`the ${L[0]}`))+(N?`, topped off with ${N.percent<2?"a wee smidge":N.percent<10&&"measly pinch"||"fair dollop"} of bizarre otherness`:"")).join(" ").concat(".");Pe.innerHTML=O};document.querySelector(".btn-refresh").addEventListener("click",()=>se());window.addEventListener("popstate",({state:u})=>{u&&u.ids&&se(u.ids),T.log("POPSTATE",u)});const Oe=/^((?!chrome|android).)*safari/i.test(navigator.userAgent),fe=async u=>{const a=643.2/te.offsetWidth,t=await he.toJpeg(te,{width:te.offsetWidth*a,height:te.offsetHeight*a,style:{transform:`scale(${a})`,transformOrigin:"0 0"},bgcolor:"#fff"});return Oe&&!u?fe(!0):t},te=document.querySelector(".image");document.querySelector(".copy").addEventListener("click",()=>{navigator.clipboard.writeText(location.origin+location.pathname).then(()=>{T.log("saved!")},()=>{T.log("whoops!")})});document.querySelector(".save").addEventListener("click",async()=>{const u=await fe();var a=document.createElement("a");a.download=`${location.pathname.slice(1).replace(/([^\/]+)\/(.*)$/,"$2-$1")}.jpg`,a.href=u,a.click()});let _;const qe=async()=>{_=await de();const u=me(location.pathname);se(u)};qe();
